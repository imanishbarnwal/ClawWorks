"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/page",{

/***/ "(app-pages-browser)/./src/lib/researchOutputs.ts":
/*!************************************!*\
  !*** ./src/lib/researchOutputs.ts ***!
  \************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   generateDataOutput: function() { return /* binding */ generateDataOutput; },\n/* harmony export */   generateFinalReport: function() { return /* binding */ generateFinalReport; },\n/* harmony export */   generateSeoOutput: function() { return /* binding */ generateSeoOutput; }\n/* harmony export */ });\n/**\n * Generates deterministic output for the Data Agent based on input.\n */ const generateDataOutput = (input)=>{\n    return [\n        \"• Monad executes transactions in parallel (optimistic execution) while maintaining sequential consistency.\",\n        \"• High performance: Target of 10,000 TPS with 1-second block times.\",\n        \"• Full EVM Compatibility: Bytecode-level compatibility allows existing Ethereum dApps to deploy seamlessly.\",\n        \"• Database Optimization: MonadDb uses asynchronous IO to remove bottlenecks in state access.\",\n        \"• Context: User query '\".concat(input, \"' relates to high-throughput DeFi and Agent infrastructure.\")\n    ].join(\"\\n\");\n};\n/**\n * Generates deterministic SEO output.\n */ const generateSeoOutput = (input)=>{\n    const keywords = input.split(\" \").slice(0, 3).join(\", \");\n    return [\n        \"Title: Ultimate Guide to Monad Blockchain: \".concat(input),\n        \"Meta Description: Discover how Monad scales Ethereum with parallel execution. Relevant for: \".concat(keywords, \".\"),\n        \"H2: What is Monad?\",\n        \"H2: Understanding Parallel Execution\",\n        \"H2: MonadDb vs LevelDB\",\n        \"H2: The \".concat(keywords, \" Use Case\"),\n        \"H2: Future of High-Performance EVM\"\n    ].join(\"\\n\");\n};\n/**\n * Generates final report (Formatting Agent).\n */ const generateFinalReport = (input, dataOut, seoOut)=>{\n    return \"\\n# RESEARCH REPORT: \".concat(input, \"\\n\\n## \").concat(seoOut.split(\"\\n\")[0], \"\\n\\n\").concat(seoOut.split(\"\\n\")[1], \"\\n\\n---\\n### Key Findings\\n\").concat(dataOut, \"\\n\\n---\\n### Content Structure\\n\").concat(seoOut.split(\"\\n\").filter((l)=>l.startsWith(\"H2\")).map((l)=>\"- \".concat(l.replace(\"H2: \", \"\"))).join(\"\\n\"), \"\\n\\n*Generated by ClawWorks Agent Swarm*\\n    \").trim();\n};\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9saWIvcmVzZWFyY2hPdXRwdXRzLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUNBOztDQUVDLEdBQ00sTUFBTUEscUJBQXFCLENBQUNDO0lBQy9CLE9BQU87UUFDRjtRQUNBO1FBQ0E7UUFDQTtRQUNBLDBCQUErQixPQUFOQSxPQUFNO0tBQ25DLENBQUNDLElBQUksQ0FBQztBQUNYLEVBQUU7QUFFRjs7Q0FFQyxHQUNNLE1BQU1DLG9CQUFvQixDQUFDRjtJQUM5QixNQUFNRyxXQUFXSCxNQUFNSSxLQUFLLENBQUMsS0FBS0MsS0FBSyxDQUFDLEdBQUcsR0FBR0osSUFBSSxDQUFDO0lBQ25ELE9BQU87UUFDRiw4Q0FBbUQsT0FBTkQ7UUFDN0MsK0ZBQXVHLE9BQVRHLFVBQVM7UUFDdkc7UUFDQTtRQUNBO1FBQ0EsV0FBbUIsT0FBVEEsVUFBUztRQUNuQjtLQUNKLENBQUNGLElBQUksQ0FBQztBQUNYLEVBQUU7QUFFRjs7Q0FFQyxHQUNNLE1BQU1LLHNCQUFzQixDQUFDTixPQUFlTyxTQUFpQkM7SUFDaEUsT0FBTyx3QkFHTkEsT0FGZ0JSLE9BQU0sV0FJekJRLE9BRkdBLE9BQU9KLEtBQUssQ0FBQyxLQUFLLENBQUMsRUFBRSxFQUFDLFFBTXpCRyxPQUpBQyxPQUFPSixLQUFLLENBQUMsS0FBSyxDQUFDLEVBQUUsRUFBQywrQkFRdEJJLE9BSkFELFNBQVEsb0NBSTZGLE9BQXJHQyxPQUFPSixLQUFLLENBQUMsTUFBTUssTUFBTSxDQUFDQyxDQUFBQSxJQUFLQSxFQUFFQyxVQUFVLENBQUMsT0FBT0MsR0FBRyxDQUFDRixDQUFBQSxJQUFLLEtBQTJCLE9BQXRCQSxFQUFFRyxPQUFPLENBQUMsUUFBUSxNQUFPWixJQUFJLENBQUMsT0FBTSxrREFHakdhLElBQUk7QUFDVixFQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL3NyYy9saWIvcmVzZWFyY2hPdXRwdXRzLnRzPzY5NTYiXSwic291cmNlc0NvbnRlbnQiOlsiXG4vKipcbiAqIEdlbmVyYXRlcyBkZXRlcm1pbmlzdGljIG91dHB1dCBmb3IgdGhlIERhdGEgQWdlbnQgYmFzZWQgb24gaW5wdXQuXG4gKi9cbmV4cG9ydCBjb25zdCBnZW5lcmF0ZURhdGFPdXRwdXQgPSAoaW5wdXQ6IHN0cmluZykgPT4ge1xuICAgIHJldHVybiBbXG4gICAgICAgIGDigKIgTW9uYWQgZXhlY3V0ZXMgdHJhbnNhY3Rpb25zIGluIHBhcmFsbGVsIChvcHRpbWlzdGljIGV4ZWN1dGlvbikgd2hpbGUgbWFpbnRhaW5pbmcgc2VxdWVudGlhbCBjb25zaXN0ZW5jeS5gLFxuICAgICAgICBg4oCiIEhpZ2ggcGVyZm9ybWFuY2U6IFRhcmdldCBvZiAxMCwwMDAgVFBTIHdpdGggMS1zZWNvbmQgYmxvY2sgdGltZXMuYCxcbiAgICAgICAgYOKAoiBGdWxsIEVWTSBDb21wYXRpYmlsaXR5OiBCeXRlY29kZS1sZXZlbCBjb21wYXRpYmlsaXR5IGFsbG93cyBleGlzdGluZyBFdGhlcmV1bSBkQXBwcyB0byBkZXBsb3kgc2VhbWxlc3NseS5gLFxuICAgICAgICBg4oCiIERhdGFiYXNlIE9wdGltaXphdGlvbjogTW9uYWREYiB1c2VzIGFzeW5jaHJvbm91cyBJTyB0byByZW1vdmUgYm90dGxlbmVja3MgaW4gc3RhdGUgYWNjZXNzLmAsXG4gICAgICAgIGDigKIgQ29udGV4dDogVXNlciBxdWVyeSAnJHtpbnB1dH0nIHJlbGF0ZXMgdG8gaGlnaC10aHJvdWdocHV0IERlRmkgYW5kIEFnZW50IGluZnJhc3RydWN0dXJlLmBcbiAgICBdLmpvaW4oJ1xcbicpO1xufTtcblxuLyoqXG4gKiBHZW5lcmF0ZXMgZGV0ZXJtaW5pc3RpYyBTRU8gb3V0cHV0LlxuICovXG5leHBvcnQgY29uc3QgZ2VuZXJhdGVTZW9PdXRwdXQgPSAoaW5wdXQ6IHN0cmluZykgPT4ge1xuICAgIGNvbnN0IGtleXdvcmRzID0gaW5wdXQuc3BsaXQoJyAnKS5zbGljZSgwLCAzKS5qb2luKCcsICcpO1xuICAgIHJldHVybiBbXG4gICAgICAgIGBUaXRsZTogVWx0aW1hdGUgR3VpZGUgdG8gTW9uYWQgQmxvY2tjaGFpbjogJHtpbnB1dH1gLFxuICAgICAgICBgTWV0YSBEZXNjcmlwdGlvbjogRGlzY292ZXIgaG93IE1vbmFkIHNjYWxlcyBFdGhlcmV1bSB3aXRoIHBhcmFsbGVsIGV4ZWN1dGlvbi4gUmVsZXZhbnQgZm9yOiAke2tleXdvcmRzfS5gLFxuICAgICAgICBgSDI6IFdoYXQgaXMgTW9uYWQ/YCxcbiAgICAgICAgYEgyOiBVbmRlcnN0YW5kaW5nIFBhcmFsbGVsIEV4ZWN1dGlvbmAsXG4gICAgICAgIGBIMjogTW9uYWREYiB2cyBMZXZlbERCYCxcbiAgICAgICAgYEgyOiBUaGUgJHtrZXl3b3Jkc30gVXNlIENhc2VgLFxuICAgICAgICBgSDI6IEZ1dHVyZSBvZiBIaWdoLVBlcmZvcm1hbmNlIEVWTWBcbiAgICBdLmpvaW4oJ1xcbicpO1xufTtcblxuLyoqXG4gKiBHZW5lcmF0ZXMgZmluYWwgcmVwb3J0IChGb3JtYXR0aW5nIEFnZW50KS5cbiAqL1xuZXhwb3J0IGNvbnN0IGdlbmVyYXRlRmluYWxSZXBvcnQgPSAoaW5wdXQ6IHN0cmluZywgZGF0YU91dDogc3RyaW5nLCBzZW9PdXQ6IHN0cmluZykgPT4ge1xuICAgIHJldHVybiBgXG4jIFJFU0VBUkNIIFJFUE9SVDogJHtpbnB1dH1cblxuIyMgJHtzZW9PdXQuc3BsaXQoJ1xcbicpWzBdfVxuXG4ke3Nlb091dC5zcGxpdCgnXFxuJylbMV19XG5cbi0tLVxuIyMjIEtleSBGaW5kaW5nc1xuJHtkYXRhT3V0fVxuXG4tLS1cbiMjIyBDb250ZW50IFN0cnVjdHVyZVxuJHtzZW9PdXQuc3BsaXQoJ1xcbicpLmZpbHRlcihsID0+IGwuc3RhcnRzV2l0aCgnSDInKSkubWFwKGwgPT4gYC0gJHtsLnJlcGxhY2UoJ0gyOiAnLCAnJyl9YCkuam9pbignXFxuJyl9XG5cbipHZW5lcmF0ZWQgYnkgQ2xhd1dvcmtzIEFnZW50IFN3YXJtKlxuICAgIGAudHJpbSgpO1xufTtcbiJdLCJuYW1lcyI6WyJnZW5lcmF0ZURhdGFPdXRwdXQiLCJpbnB1dCIsImpvaW4iLCJnZW5lcmF0ZVNlb091dHB1dCIsImtleXdvcmRzIiwic3BsaXQiLCJzbGljZSIsImdlbmVyYXRlRmluYWxSZXBvcnQiLCJkYXRhT3V0Iiwic2VvT3V0IiwiZmlsdGVyIiwibCIsInN0YXJ0c1dpdGgiLCJtYXAiLCJyZXBsYWNlIiwidHJpbSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/lib/researchOutputs.ts\n"));

/***/ }),

/***/ "(app-pages-browser)/./src/lib/runResearchTask.ts":
/*!************************************!*\
  !*** ./src/lib/runResearchTask.ts ***!
  \************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   runResearchTask: function() { return /* binding */ runResearchTask; }\n/* harmony export */ });\n/* harmony import */ var _researchOutputs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./researchOutputs */ \"(app-pages-browser)/./src/lib/researchOutputs.ts\");\n\n// ... (existing code)\n// Store outputs to chain them for the final report\nconst agentOutputs = {};\nconst generateMockOutput = (agent, input, context)=>{\n    if (agent.includes(\"Data\")) {\n        return (0,_researchOutputs__WEBPACK_IMPORTED_MODULE_0__.generateDataOutput)(input);\n    }\n    if (agent.includes(\"SEO\")) {\n        return (0,_researchOutputs__WEBPACK_IMPORTED_MODULE_0__.generateSeoOutput)(input);\n    }\n    if (agent.includes(\"Formatting\")) {\n        // Retrieve previous context or default\n        const d = context[\"Data Agent\"] || \"No specific data gathered.\";\n        const s = context[\"SEO Agent\"] || \"Title: Report for \".concat(input, \"\\nMeta: Auto-generated\\nH2: Overview\");\n        return (0,_researchOutputs__WEBPACK_IMPORTED_MODULE_0__.generateFinalReport)(input, d, s);\n    }\n    return \"Task Completed.\";\n};\n// 7. Execute payments (Loop)\nfor (const pay of payments){\n    console.log(\"➡️ Paying \".concat(pay.agentName));\n    // ... (pre-log) ...\n    // ... (execution) ...\n    // Generate output\n    const output = generateMockOutput(pay.agentName, taskDescription, agentOutputs);\n    agentOutputs[pay.agentName] = output;\n    onLog({\n        // ...\n        output: output\n    });\n// ...\n}\nconst AGENT_TREASURY_ABI = [\n    \"function execute(address target, uint256 value, bytes calldata data) external returns (bytes)\",\n    \"function approveToken(address token, address spender, uint256 amount) external\",\n    \"function owner() view returns (address)\"\n];\n// Helper to extract revert reason\nconst getRevertReason = (err)=>{\n    var _err_info_error, _err_info;\n    if (err === null || err === void 0 ? void 0 : (_err_info = err.info) === null || _err_info === void 0 ? void 0 : (_err_info_error = _err_info.error) === null || _err_info_error === void 0 ? void 0 : _err_info_error.message) return err.info.error.message;\n    if (err === null || err === void 0 ? void 0 : err.message) return err.message;\n    return \"Transaction Failed (Unknown Reason)\";\n};\n/**\n * Executes the full research workflow by orchestrating the Research Agent.\n * Uses pure ethers.js v6 with window.ethereum.\n */ async function runResearchTask(taskDescription1, onLog1, onTreasuriesUpdate) {\n    console.log('\\uD83D\\uDE80 Starting Research Task: \"'.concat(taskDescription1, '\"'));\n    // 0. Log User Task Submission (UI Only)\n    onLog1({\n        task: \"User Task Submitted\",\n        agentName: \"User\",\n        amount: \"-\",\n        status: \"success\",\n        decision: {\n            reason: taskDescription1,\n            cost: \"-\"\n        }\n    });\n    // 1. Connect Wallet\n    const { signer, address } = await connectWallet();\n    console.log(\"\\uD83D\\uDC64 Connected wallet:\", address);\n    // 2. Load registry\n    const researchTreasuryAddr = AGENT_REGISTRY.research_agent.treasury_address;\n    const dataAgentAddr = AGENT_REGISTRY.data_agent.treasury_address;\n    const seoAgentAddr = AGENT_REGISTRY.seo_agent.treasury_address;\n    const formattingAgentAddr = AGENT_REGISTRY.formatting_agent.treasury_address;\n    // ✅ FIX 1 — Registry sanity check\n    if (!researchTreasuryAddr || !dataAgentAddr || !seoAgentAddr || !formattingAgentAddr) {\n        throw new Error(\"❌ Agent registry is missing treasury addresses\");\n    }\n    console.log(\"\\uD83D\\uDCD2 Registry OK\");\n    // 3. Instantiate contracts\n    const router = new ethers.Contract(PROTOCOL_ROUTER_ADDRESS, ROUTER_ABI, signer);\n    const researchTreasury = new ethers.Contract(researchTreasuryAddr, AGENT_TREASURY_ABI, signer);\n    // ✅ FIX 2 — Execution authority check\n    try {\n        const treasuryOwner = await researchTreasury.owner();\n        console.log(\"\\uD83C\\uDFE6 Research Treasury Owner:\", treasuryOwner);\n        console.log(\"✍️ Connected Wallet:\", address);\n        if (treasuryOwner.toLowerCase() !== address.toLowerCase()) {\n            console.warn(\"⚠️ Wallet is NOT treasury owner — execute() may revert\");\n        } else {\n            console.log(\"✅ Wallet IS treasury owner\");\n        }\n    } catch (e) {\n        console.log(\"ℹ️ Treasury has no owner() or uses role-based auth\");\n    }\n    // 4. Fetch payment token (AUSD)\n    console.log(\"\\uD83D\\uDCB0 Fetching payment token...\");\n    const ausdAddress = await router.paymentToken();\n    console.log(\"AUSD Address:\", ausdAddress);\n    const ausd = new ethers.Contract(ausdAddress, ERC20_ABI, signer);\n    // ==========================================\n    // NEW STEP: User Funds Research Agent (1.00 AUSD)\n    // ==========================================\n    const fundingAmount = ethers.parseEther(\"1.0\");\n    console.log(\"Checking user allowance for funding...\");\n    const userAllowance = await ausd.allowance(address, PROTOCOL_ROUTER_ADDRESS);\n    if (userAllowance < fundingAmount) {\n        console.log(\"\\uD83D\\uDCDD User approving Router...\");\n        onLog1({\n            task: \"Approving AUSD Spend\",\n            agentName: \"User (You)\",\n            amount: \"0.00\",\n            status: \"pending\"\n        });\n        try {\n            const approveTx = await ausd.approve(PROTOCOL_ROUTER_ADDRESS, ethers.MaxUint256);\n            console.log(\"User Approval Tx:\", approveTx.hash);\n            await approveTx.wait();\n            console.log(\"✅ User Approval Confirmed\");\n        } catch (err) {\n            console.error(\"User Approval Failed:\", err);\n            throw new Error(\"User Approval Failed: \".concat(getRevertReason(err)));\n        }\n    }\n    console.log(\"\\uD83D\\uDCB8 Funding Research Agent...\");\n    onLog1({\n        task: \"Funding Research Agent\",\n        agentName: \"User (You)\",\n        amount: \"1.00\",\n        status: \"pending\"\n    });\n    try {\n        const fundTx = await router.processPayment(researchTreasuryAddr, fundingAmount, \"Initial Capital Infection\");\n        console.log(\"Funding Tx:\", fundTx.hash);\n        await fundTx.wait();\n        onLog1({\n            task: \"Funding Complete\",\n            agentName: \"User (You)\",\n            amount: \"1.00\",\n            txHash: fundTx.hash,\n            status: \"success\"\n        });\n        console.log(\"✅ Funding Confirmed\");\n        if (onTreasuriesUpdate) {\n            console.log(\"\\uD83D\\uDD04 Refetching Live Treasuries...\");\n            await onTreasuriesUpdate();\n        }\n    } catch (err) {\n        console.error(\"Funding Failed:\", err);\n        onLog1({\n            task: \"Funding Failed\",\n            agentName: \"User (You)\",\n            amount: \"1.00\",\n            status: \"error\"\n        });\n        throw new Error(\"Funding Failed: \".concat(getRevertReason(err)));\n    }\n    // ==========================================\n    // EXISTING FLOW: Research Agent Pays Downstream\n    // ==========================================\n    // 5. Allowance check (Research Treasury -> Router)\n    const currentAllowance = await ausd.allowance(researchTreasuryAddr, PROTOCOL_ROUTER_ADDRESS);\n    const requiredAmount = ethers.parseEther(\"1.0\"); // Need enough for downstream payments\n    if (currentAllowance < requiredAmount) {\n        console.log(\"\\uD83D\\uDCDD Approving router to spend AUSD (Treasury)...\");\n        onLog1({\n            task: \"Approving Payment Router\",\n            agentName: \"Research Treasury\",\n            amount: \"0.00\",\n            status: \"pending\"\n        });\n        const approveTx = await researchTreasury.approveToken(ausdAddress, PROTOCOL_ROUTER_ADDRESS, ethers.MaxUint256);\n        console.log(\"Treasury Approval tx:\", approveTx.hash);\n        await approveTx.wait();\n        console.log(\"✅ Treasury Approval confirmed\");\n    } else {\n        console.log(\"✅ Treasury Allowance already sufficient\");\n    }\n    // 6. Agent Decision Engine\n    const decidePayments = (input)=>{\n        const t = input.toLowerCase();\n        const plan = [];\n        // Dynamic hiring based on keywords\n        if (t.includes(\"data\") || t.includes(\"research\") || t.includes(\"supply\") || t.includes(\"info\")) {\n            plan.push({\n                recipient: dataAgentAddr,\n                amount: \"0.20\",\n                task: \"Data Collection\",\n                agentName: \"Data Agent\",\n                decision: {\n                    reason: \"Task trigger 'data/research' -> Initiating Supply Chain Scan\",\n                    cost: \"0.20\"\n                }\n            });\n        }\n        if (t.includes(\"seo\") || t.includes(\"growth\") || t.includes(\"rank\") || t.includes(\"search\")) {\n            plan.push({\n                recipient: seoAgentAddr,\n                amount: \"0.10\",\n                task: \"SEO Optimization\",\n                agentName: \"SEO Agent\",\n                decision: {\n                    reason: \"Task trigger 'seo/growth' -> Optimizing Search Ranking\",\n                    cost: \"0.10\"\n                }\n            });\n        }\n        if (t.includes(\"format\") || t.includes(\"pdf\") || t.includes(\"report\") || t.includes(\"layout\")) {\n            plan.push({\n                recipient: formattingAgentAddr,\n                amount: \"0.05\",\n                task: \"Formatting\",\n                agentName: \"Formatting Agent\",\n                decision: {\n                    reason: \"Task trigger 'format/report' -> Structuring Final Output\",\n                    cost: \"0.05\"\n                }\n            });\n        }\n        // Fallback: If input is vague, trigger standard protocol\n        if (plan.length === 0) {\n            console.log(\"⚠️ No specific keywords - Defaulting to Full Suite\");\n            return [\n                {\n                    recipient: dataAgentAddr,\n                    amount: \"0.20\",\n                    task: \"Data Collection\",\n                    agentName: \"Data Agent\",\n                    decision: {\n                        reason: \"Ambiguous task input -> Default Protocol: Data\",\n                        cost: \"0.20\"\n                    }\n                },\n                {\n                    recipient: seoAgentAddr,\n                    amount: \"0.10\",\n                    task: \"SEO Optimization\",\n                    agentName: \"SEO Agent\",\n                    decision: {\n                        reason: \"Ambiguous task input -> Default Protocol: SEO\",\n                        cost: \"0.10\"\n                    }\n                },\n                {\n                    recipient: formattingAgentAddr,\n                    amount: \"0.05\",\n                    task: \"Formatting\",\n                    agentName: \"Formatting Agent\",\n                    decision: {\n                        reason: \"Ambiguous task input -> Default Protocol: Formatting\",\n                        cost: \"0.05\"\n                    }\n                }\n            ];\n        }\n        return plan;\n    };\n    const payments1 = decidePayments(taskDescription1);\n    const generateMockOutput = (agent, input)=>{\n        const i = input.substring(0, 20) + (input.length > 20 ? \"...\" : \"\");\n        if (agent.includes(\"Data\")) return \"• Identified 3 verified data sources for '\".concat(i, \"'\\n• Extracted 1,420 records from Oracle nodes\\n• Sanitized input parameters\");\n        if (agent.includes(\"SEO\")) return '> Keyword Analysis\\n• Primary Term: \"'.concat(input.split(\" \")[0] || \"Main\", '\"\\n• Search Vol: High\\n• Competition: Moderate\\n✅ Optimization Applied');\n        if (agent.includes(\"Formatting\")) return \"\\uD83D\\uDCC4 REPORT GENERATED\\n---\\nTitle: Search Analysis for \".concat(i, \"\\nFormat: PDF (v1.4)\\nSize: 2.4MB\\nStatus: Ready for Download\");\n        return \"Process completed successfully.\";\n    };\n    // 7. Execute payments (Loop)\n    for (const pay of payments1){\n        console.log(\"➡️ Paying \".concat(pay.agentName));\n        onLog1({\n            task: pay.task,\n            agentName: pay.agentName,\n            amount: pay.amount,\n            decision: pay.decision,\n            status: \"pending\"\n        });\n        try {\n            const calldata = router.interface.encodeFunctionData(\"processPayment\", [\n                pay.recipient,\n                ethers.parseEther(pay.amount),\n                \"Payment for \".concat(pay.task)\n            ]);\n            const tx = await researchTreasury.execute(PROTOCOL_ROUTER_ADDRESS, 0, calldata);\n            console.log(\"Tx sent:\", tx.hash);\n            await tx.wait();\n            console.log(\"✅ \".concat(pay.task, \" complete\"));\n            onLog1({\n                task: \"\".concat(pay.task, \" - Confirmed\"),\n                agentName: pay.agentName,\n                amount: pay.amount,\n                txHash: tx.hash,\n                status: \"success\",\n                output: generateMockOutput(pay.agentName, taskDescription1)\n            });\n            if (onTreasuriesUpdate) {\n                console.log(\"\\uD83D\\uDD04 Refetching Live Treasuries...\");\n                await onTreasuriesUpdate();\n            }\n        } catch (err) {\n            console.error(\"❌ Payment failed:\", err);\n            onLog1({\n                task: \"\".concat(pay.task, \" - FAILED\"),\n                agentName: pay.agentName,\n                amount: pay.amount,\n                status: \"error\"\n            });\n            throw new Error(getRevertReason(err));\n        }\n    }\n    console.log(\"\\uD83C\\uDF89 Research Task Workflow Completed\");\n    return \"SUCCESS\";\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9saWIvcnVuUmVzZWFyY2hUYXNrLnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQStGO0FBRS9GLHNCQUFzQjtBQUV0QixtREFBbUQ7QUFDbkQsTUFBTUcsZUFBdUMsQ0FBQztBQUU5QyxNQUFNQyxxQkFBcUIsQ0FBQ0MsT0FBZUMsT0FBZUM7SUFDdEQsSUFBSUYsTUFBTUcsUUFBUSxDQUFDLFNBQVM7UUFDeEIsT0FBT1Isb0VBQWtCQSxDQUFDTTtJQUM5QjtJQUNBLElBQUlELE1BQU1HLFFBQVEsQ0FBQyxRQUFRO1FBQ3ZCLE9BQU9QLG1FQUFpQkEsQ0FBQ0s7SUFDN0I7SUFDQSxJQUFJRCxNQUFNRyxRQUFRLENBQUMsZUFBZTtRQUM5Qix1Q0FBdUM7UUFDdkMsTUFBTUMsSUFBSUYsT0FBTyxDQUFDLGFBQWEsSUFBSTtRQUNuQyxNQUFNRyxJQUFJSCxPQUFPLENBQUMsWUFBWSxJQUFJLHFCQUEyQixPQUFORCxPQUFNO1FBQzdELE9BQU9KLHFFQUFtQkEsQ0FBQ0ksT0FBT0csR0FBR0M7SUFDekM7SUFDQSxPQUFPO0FBQ1g7QUFFQSw2QkFBNkI7QUFDN0IsS0FBSyxNQUFNQyxPQUFPQyxTQUFVO0lBQ3hCQyxRQUFRQyxHQUFHLENBQUMsYUFBMkIsT0FBZEgsSUFBSUksU0FBUztJQUV0QyxvQkFBb0I7SUFFcEIsc0JBQXNCO0lBRXRCLGtCQUFrQjtJQUNsQixNQUFNQyxTQUFTWixtQkFBbUJPLElBQUlJLFNBQVMsRUFBRUUsaUJBQWlCZDtJQUNsRUEsWUFBWSxDQUFDUSxJQUFJSSxTQUFTLENBQUMsR0FBR0M7SUFFOUJFLE1BQU07UUFDRixNQUFNO1FBQ05GLFFBQVFBO0lBQ1o7QUFFQSxNQUFNO0FBQ1Y7QUFHQSxNQUFNRyxxQkFBcUI7SUFDdkI7SUFDQTtJQUNBO0NBQ0g7QUFFRCxrQ0FBa0M7QUFDbEMsTUFBTUMsa0JBQWtCLENBQUNDO1FBQ2pCQSxpQkFBQUE7SUFBSixJQUFJQSxnQkFBQUEsMkJBQUFBLFlBQUFBLElB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QUFUaEIsSUFBSWdCLElBQUksRUFBQztnQkFDbEJaLFdBQVdKLElBQUlJLFNBQVM7Z0JBQ3hCYSxRQUFRakIsSUFBSWlCLE1BQU07Z0JBQ2xCQyxRQUFRO1lBQ1o7WUFFQSxNQUFNLElBQUlpQixNQUFNMUIsZ0JBQWdCQztRQUNwQztJQUNKO0lBRUFSLFFBQVFDLEdBQUcsQ0FBQztJQUNaLE9BQU87QUFDWCIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9zcmMvbGliL3J1blJlc2VhcmNoVGFzay50cz9kYzNkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdlbmVyYXRlRGF0YU91dHB1dCwgZ2VuZXJhdGVTZW9PdXRwdXQsIGdlbmVyYXRlRmluYWxSZXBvcnQgfSBmcm9tICcuL3Jlc2VhcmNoT3V0cHV0cyc7XG5cbi8vIC4uLiAoZXhpc3RpbmcgY29kZSlcblxuLy8gU3RvcmUgb3V0cHV0cyB0byBjaGFpbiB0aGVtIGZvciB0aGUgZmluYWwgcmVwb3J0XG5jb25zdCBhZ2VudE91dHB1dHM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7fTtcblxuY29uc3QgZ2VuZXJhdGVNb2NrT3V0cHV0ID0gKGFnZW50OiBzdHJpbmcsIGlucHV0OiBzdHJpbmcsIGNvbnRleHQ6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4pID0+IHtcbiAgICBpZiAoYWdlbnQuaW5jbHVkZXMoXCJEYXRhXCIpKSB7XG4gICAgICAgIHJldHVybiBnZW5lcmF0ZURhdGFPdXRwdXQoaW5wdXQpO1xuICAgIH1cbiAgICBpZiAoYWdlbnQuaW5jbHVkZXMoXCJTRU9cIikpIHtcbiAgICAgICAgcmV0dXJuIGdlbmVyYXRlU2VvT3V0cHV0KGlucHV0KTtcbiAgICB9XG4gICAgaWYgKGFnZW50LmluY2x1ZGVzKFwiRm9ybWF0dGluZ1wiKSkge1xuICAgICAgICAvLyBSZXRyaWV2ZSBwcmV2aW91cyBjb250ZXh0IG9yIGRlZmF1bHRcbiAgICAgICAgY29uc3QgZCA9IGNvbnRleHRbXCJEYXRhIEFnZW50XCJdIHx8IFwiTm8gc3BlY2lmaWMgZGF0YSBnYXRoZXJlZC5cIjtcbiAgICAgICAgY29uc3QgcyA9IGNvbnRleHRbXCJTRU8gQWdlbnRcIl0gfHwgYFRpdGxlOiBSZXBvcnQgZm9yICR7aW5wdXR9XFxuTWV0YTogQXV0by1nZW5lcmF0ZWRcXG5IMjogT3ZlcnZpZXdgO1xuICAgICAgICByZXR1cm4gZ2VuZXJhdGVGaW5hbFJlcG9ydChpbnB1dCwgZCwgcyk7XG4gICAgfVxuICAgIHJldHVybiBcIlRhc2sgQ29tcGxldGVkLlwiO1xufTtcblxuLy8gNy4gRXhlY3V0ZSBwYXltZW50cyAoTG9vcClcbmZvciAoY29uc3QgcGF5IG9mIHBheW1lbnRzKSB7XG4gICAgY29uc29sZS5sb2coYOKeoe+4jyBQYXlpbmcgJHtwYXkuYWdlbnROYW1lfWApO1xuXG4gICAgLy8gLi4uIChwcmUtbG9nKSAuLi5cblxuICAgIC8vIC4uLiAoZXhlY3V0aW9uKSAuLi5cblxuICAgIC8vIEdlbmVyYXRlIG91dHB1dFxuICAgIGNvbnN0IG91dHB1dCA9IGdlbmVyYXRlTW9ja091dHB1dChwYXkuYWdlbnROYW1lLCB0YXNrRGVzY3JpcHRpb24sIGFnZW50T3V0cHV0cyk7XG4gICAgYWdlbnRPdXRwdXRzW3BheS5hZ2VudE5hbWVdID0gb3V0cHV0O1xuXG4gICAgb25Mb2coe1xuICAgICAgICAvLyAuLi5cbiAgICAgICAgb3V0cHV0OiBvdXRwdXRcbiAgICB9KTtcblxuICAgIC8vIC4uLlxufVxuXG5cbmNvbnN0IEFHRU5UX1RSRUFTVVJZX0FCSSA9IFtcbiAgICBcImZ1bmN0aW9uIGV4ZWN1dGUoYWRkcmVzcyB0YXJnZXQsIHVpbnQyNTYgdmFsdWUsIGJ5dGVzIGNhbGxkYXRhIGRhdGEpIGV4dGVybmFsIHJldHVybnMgKGJ5dGVzKVwiLFxuICAgIFwiZnVuY3Rpb24gYXBwcm92ZVRva2VuKGFkZHJlc3MgdG9rZW4sIGFkZHJlc3Mgc3BlbmRlciwgdWludDI1NiBhbW91bnQpIGV4dGVybmFsXCIsXG4gICAgXCJmdW5jdGlvbiBvd25lcigpIHZpZXcgcmV0dXJucyAoYWRkcmVzcylcIlxuXTtcblxuLy8gSGVscGVyIHRvIGV4dHJhY3QgcmV2ZXJ0IHJlYXNvblxuY29uc3QgZ2V0UmV2ZXJ0UmVhc29uID0gKGVycjogYW55KSA9PiB7XG4gICAgaWYgKGVycj8uaW5mbz8uZXJyb3I/Lm1lc3NhZ2UpIHJldHVybiBlcnIuaW5mby5lcnJvci5tZXNzYWdlO1xuICAgIGlmIChlcnI/Lm1lc3NhZ2UpIHJldHVybiBlcnIubWVzc2FnZTtcbiAgICByZXR1cm4gXCJUcmFuc2FjdGlvbiBGYWlsZWQgKFVua25vd24gUmVhc29uKVwiO1xufTtcblxuLyoqXG4gKiBFeGVjdXRlcyB0aGUgZnVsbCByZXNlYXJjaCB3b3JrZmxvdyBieSBvcmNoZXN0cmF0aW5nIHRoZSBSZXNlYXJjaCBBZ2VudC5cbiAqIFVzZXMgcHVyZSBldGhlcnMuanMgdjYgd2l0aCB3aW5kb3cuZXRoZXJldW0uXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBydW5SZXNlYXJjaFRhc2soXG4gICAgdGFza0Rlc2NyaXB0aW9uOiBzdHJpbmcsXG4gICAgb25Mb2c6IChsb2c6IHtcbiAgICAgICAgdGFzazogc3RyaW5nO1xuICAgICAgICBhZ2VudE5hbWU6IHN0cmluZztcbiAgICAgICAgYW1vdW50OiBzdHJpbmc7XG4gICAgICAgIHR4SGFzaD86IHN0cmluZztcbiAgICAgICAgc3RhdHVzOiBcInBlbmRpbmdcIiB8IFwic3VjY2Vzc1wiIHwgXCJlcnJvclwiO1xuICAgICAgICBvdXRwdXQ/OiBzdHJpbmc7XG4gICAgICAgIGRlY2lzaW9uPzoge1xuICAgICAgICAgICAgcmVhc29uOiBzdHJpbmc7XG4gICAgICAgICAgICBjb3N0OiBzdHJpbmc7XG4gICAgICAgIH07XG4gICAgfSkgPT4gdm9pZCxcbiAgICBvblRyZWFzdXJpZXNVcGRhdGU/OiAoKSA9PiBQcm9taXNlPHZvaWQ+XG4pIHtcbiAgICBjb25zb2xlLmxvZyhg8J+agCBTdGFydGluZyBSZXNlYXJjaCBUYXNrOiBcIiR7dGFza0Rlc2NyaXB0aW9ufVwiYCk7XG5cbiAgICAvLyAwLiBMb2cgVXNlciBUYXNrIFN1Ym1pc3Npb24gKFVJIE9ubHkpXG4gICAgb25Mb2coe1xuICAgICAgICB0YXNrOiBcIlVzZXIgVGFzayBTdWJtaXR0ZWRcIixcbiAgICAgICAgYWdlbnROYW1lOiBcIlVzZXJcIixcbiAgICAgICAgYW1vdW50OiBcIi1cIixcbiAgICAgICAgc3RhdHVzOiBcInN1Y2Nlc3NcIixcbiAgICAgICAgZGVjaXNpb246IHtcbiAgICAgICAgICAgIHJlYXNvbjogdGFza0Rlc2NyaXB0aW9uLFxuICAgICAgICAgICAgY29zdDogXCItXCJcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gMS4gQ29ubmVjdCBXYWxsZXRcbiAgICBjb25zdCB7IHNpZ25lciwgYWRkcmVzcyB9ID0gYXdhaXQgY29ubmVjdFdhbGxldCgpO1xuICAgIGNvbnNvbGUubG9nKFwi8J+RpCBDb25uZWN0ZWQgd2FsbGV0OlwiLCBhZGRyZXNzKTtcblxuICAgIC8vIDIuIExvYWQgcmVnaXN0cnlcbiAgICBjb25zdCByZXNlYXJjaFRyZWFzdXJ5QWRkciA9IEFHRU5UX1JFR0lTVFJZLnJlc2VhcmNoX2FnZW50LnRyZWFzdXJ5X2FkZHJlc3M7XG4gICAgY29uc3QgZGF0YUFnZW50QWRkciA9IEFHRU5UX1JFR0lTVFJZLmRhdGFfYWdlbnQudHJlYXN1cnlfYWRkcmVzcztcbiAgICBjb25zdCBzZW9BZ2VudEFkZHIgPSBBR0VOVF9SRUdJU1RSWS5zZW9fYWdlbnQudHJlYXN1cnlfYWRkcmVzcztcbiAgICBjb25zdCBmb3JtYXR0aW5nQWdlbnRBZGRyID0gQUdFTlRfUkVHSVNUUlkuZm9ybWF0dGluZ19hZ2VudC50cmVhc3VyeV9hZGRyZXNzO1xuXG4gICAgLy8g4pyFIEZJWCAxIOKAlCBSZWdpc3RyeSBzYW5pdHkgY2hlY2tcbiAgICBpZiAoXG4gICAgICAgICFyZXNlYXJjaFRyZWFzdXJ5QWRkciB8fFxuICAgICAgICAhZGF0YUFnZW50QWRkciB8fFxuICAgICAgICAhc2VvQWdlbnRBZGRyIHx8XG4gICAgICAgICFmb3JtYXR0aW5nQWdlbnRBZGRyXG4gICAgKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIuKdjCBBZ2VudCByZWdpc3RyeSBpcyBtaXNzaW5nIHRyZWFzdXJ5IGFkZHJlc3Nlc1wiKTtcbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZyhcIvCfk5IgUmVnaXN0cnkgT0tcIik7XG5cbiAgICAvLyAzLiBJbnN0YW50aWF0ZSBjb250cmFjdHNcbiAgICBjb25zdCByb3V0ZXIgPSBuZXcgZXRoZXJzLkNvbnRyYWN0KFxuICAgICAgICBQUk9UT0NPTF9ST1VURVJfQUREUkVTUyxcbiAgICAgICAgUk9VVEVSX0FCSSxcbiAgICAgICAgc2lnbmVyXG4gICAgKTtcblxuICAgIGNvbnN0IHJlc2VhcmNoVHJlYXN1cnkgPSBuZXcgZXRoZXJzLkNvbnRyYWN0KFxuICAgICAgICByZXNlYXJjaFRyZWFzdXJ5QWRkcixcbiAgICAgICAgQUdFTlRfVFJFQVNVUllfQUJJLFxuICAgICAgICBzaWduZXJcbiAgICApO1xuXG4gICAgLy8g4pyFIEZJWCAyIOKAlCBFeGVjdXRpb24gYXV0aG9yaXR5IGNoZWNrXG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdHJlYXN1cnlPd25lciA9IGF3YWl0IHJlc2VhcmNoVHJlYXN1cnkub3duZXIoKTtcbiAgICAgICAgY29uc29sZS5sb2coXCLwn4+mIFJlc2VhcmNoIFRyZWFzdXJ5IE93bmVyOlwiLCB0cmVhc3VyeU93bmVyKTtcbiAgICAgICAgY29uc29sZS5sb2coXCLinI3vuI8gQ29ubmVjdGVkIFdhbGxldDpcIiwgYWRkcmVzcyk7XG5cbiAgICAgICAgaWYgKHRyZWFzdXJ5T3duZXIudG9Mb3dlckNhc2UoKSAhPT0gYWRkcmVzcy50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oXCLimqDvuI8gV2FsbGV0IGlzIE5PVCB0cmVhc3VyeSBvd25lciDigJQgZXhlY3V0ZSgpIG1heSByZXZlcnRcIik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIuKchSBXYWxsZXQgSVMgdHJlYXN1cnkgb3duZXJcIik7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIHtcbiAgICAgICAgY29uc29sZS5sb2coXCLihLnvuI8gVHJlYXN1cnkgaGFzIG5vIG93bmVyKCkgb3IgdXNlcyByb2xlLWJhc2VkIGF1dGhcIik7XG4gICAgfVxuXG4gICAgLy8gNC4gRmV0Y2ggcGF5bWVudCB0b2tlbiAoQVVTRClcbiAgICBjb25zb2xlLmxvZyhcIvCfkrAgRmV0Y2hpbmcgcGF5bWVudCB0b2tlbi4uLlwiKTtcbiAgICBjb25zdCBhdXNkQWRkcmVzcyA9IGF3YWl0IHJvdXRlci5wYXltZW50VG9rZW4oKTtcbiAgICBjb25zb2xlLmxvZyhcIkFVU0QgQWRkcmVzczpcIiwgYXVzZEFkZHJlc3MpO1xuXG4gICAgY29uc3QgYXVzZCA9IG5ldyBldGhlcnMuQ29udHJhY3QoYXVzZEFkZHJlc3MsIEVSQzIwX0FCSSwgc2lnbmVyKTtcblxuICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgIC8vIE5FVyBTVEVQOiBVc2VyIEZ1bmRzIFJlc2VhcmNoIEFnZW50ICgxLjAwIEFVU0QpXG4gICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgY29uc3QgZnVuZGluZ0Ftb3VudCA9IGV0aGVycy5wYXJzZUV0aGVyKFwiMS4wXCIpO1xuXG4gICAgY29uc29sZS5sb2coXCJDaGVja2luZyB1c2VyIGFsbG93YW5jZSBmb3IgZnVuZGluZy4uLlwiKTtcbiAgICBjb25zdCB1c2VyQWxsb3dhbmNlID0gYXdhaXQgYXVzZC5hbGxvd2FuY2UoYWRkcmVzcywgUFJPVE9DT0xfUk9VVEVSX0FERFJFU1MpO1xuXG4gICAgaWYgKHVzZXJBbGxvd2FuY2UgPCBmdW5kaW5nQW1vdW50KSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwi8J+TnSBVc2VyIGFwcHJvdmluZyBSb3V0ZXIuLi5cIik7XG4gICAgICAgIG9uTG9nKHtcbiAgICAgICAgICAgIHRhc2s6IFwiQXBwcm92aW5nIEFVU0QgU3BlbmRcIixcbiAgICAgICAgICAgIGFnZW50TmFtZTogXCJVc2VyIChZb3UpXCIsXG4gICAgICAgICAgICBhbW91bnQ6IFwiMC4wMFwiLFxuICAgICAgICAgICAgc3RhdHVzOiBcInBlbmRpbmdcIlxuICAgICAgICB9KTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgYXBwcm92ZVR4ID0gYXdhaXQgYXVzZC5hcHByb3ZlKFBST1RPQ09MX1JPVVRFUl9BRERSRVNTLCBldGhlcnMuTWF4VWludDI1Nik7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIlVzZXIgQXBwcm92YWwgVHg6XCIsIGFwcHJvdmVUeC5oYXNoKTtcbiAgICAgICAgICAgIGF3YWl0IGFwcHJvdmVUeC53YWl0KCk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIuKchSBVc2VyIEFwcHJvdmFsIENvbmZpcm1lZFwiKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyOiBhbnkpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJVc2VyIEFwcHJvdmFsIEZhaWxlZDpcIiwgZXJyKTtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVXNlciBBcHByb3ZhbCBGYWlsZWQ6ICR7Z2V0UmV2ZXJ0UmVhc29uKGVycil9YCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZyhcIvCfkrggRnVuZGluZyBSZXNlYXJjaCBBZ2VudC4uLlwiKTtcbiAgICBvbkxvZyh7XG4gICAgICAgIHRhc2s6IFwiRnVuZGluZyBSZXNlYXJjaCBBZ2VudFwiLFxuICAgICAgICBhZ2VudE5hbWU6IFwiVXNlciAoWW91KVwiLFxuICAgICAgICBhbW91bnQ6IFwiMS4wMFwiLFxuICAgICAgICBzdGF0dXM6IFwicGVuZGluZ1wiXG4gICAgfSk7XG5cbiAgICB0cnkge1xuICAgICAgICBjb25zdCBmdW5kVHggPSBhd2FpdCByb3V0ZXIucHJvY2Vzc1BheW1lbnQoXG4gICAgICAgICAgICByZXNlYXJjaFRyZWFzdXJ5QWRkcixcbiAgICAgICAgICAgIGZ1bmRpbmdBbW91bnQsXG4gICAgICAgICAgICBcIkluaXRpYWwgQ2FwaXRhbCBJbmZlY3Rpb25cIlxuICAgICAgICApO1xuICAgICAgICBjb25zb2xlLmxvZyhcIkZ1bmRpbmcgVHg6XCIsIGZ1bmRUeC5oYXNoKTtcbiAgICAgICAgYXdhaXQgZnVuZFR4LndhaXQoKTtcblxuICAgICAgICBvbkxvZyh7XG4gICAgICAgICAgICB0YXNrOiBcIkZ1bmRpbmcgQ29tcGxldGVcIixcbiAgICAgICAgICAgIGFnZW50TmFtZTogXCJVc2VyIChZb3UpXCIsXG4gICAgICAgICAgICBhbW91bnQ6IFwiMS4wMFwiLFxuICAgICAgICAgICAgdHhIYXNoOiBmdW5kVHguaGFzaCxcbiAgICAgICAgICAgIHN0YXR1czogXCJzdWNjZXNzXCJcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnNvbGUubG9nKFwi4pyFIEZ1bmRpbmcgQ29uZmlybWVkXCIpO1xuXG4gICAgICAgIGlmIChvblRyZWFzdXJpZXNVcGRhdGUpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwi8J+UhCBSZWZldGNoaW5nIExpdmUgVHJlYXN1cmllcy4uLlwiKTtcbiAgICAgICAgICAgIGF3YWl0IG9uVHJlYXN1cmllc1VwZGF0ZSgpO1xuICAgICAgICB9XG5cbiAgICB9IGNhdGNoIChlcnI6IGFueSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiRnVuZGluZyBGYWlsZWQ6XCIsIGVycik7XG4gICAgICAgIG9uTG9nKHtcbiAgICAgICAgICAgIHRhc2s6IFwiRnVuZGluZyBGYWlsZWRcIixcbiAgICAgICAgICAgIGFnZW50TmFtZTogXCJVc2VyIChZb3UpXCIsXG4gICAgICAgICAgICBhbW91bnQ6IFwiMS4wMFwiLFxuICAgICAgICAgICAgc3RhdHVzOiBcImVycm9yXCJcbiAgICAgICAgfSk7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgRnVuZGluZyBGYWlsZWQ6ICR7Z2V0UmV2ZXJ0UmVhc29uKGVycil9YCk7XG4gICAgfVxuXG4gICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgLy8gRVhJU1RJTkcgRkxPVzogUmVzZWFyY2ggQWdlbnQgUGF5cyBEb3duc3RyZWFtXG4gICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgICAvLyA1LiBBbGxvd2FuY2UgY2hlY2sgKFJlc2VhcmNoIFRyZWFzdXJ5IC0+IFJvdXRlcilcbiAgICBjb25zdCBjdXJyZW50QWxsb3dhbmNlID0gYXdhaXQgYXVzZC5hbGxvd2FuY2UoXG4gICAgICAgIHJlc2VhcmNoVHJlYXN1cnlBZGRyLFxuICAgICAgICBQUk9UT0NPTF9ST1VURVJfQUREUkVTU1xuICAgICk7XG5cbiAgICBjb25zdCByZXF1aXJlZEFtb3VudCA9IGV0aGVycy5wYXJzZUV0aGVyKFwiMS4wXCIpOyAvLyBOZWVkIGVub3VnaCBmb3IgZG93bnN0cmVhbSBwYXltZW50c1xuXG4gICAgaWYgKGN1cnJlbnRBbGxvd2FuY2UgPCByZXF1aXJlZEFtb3VudCkge1xuICAgICAgICBjb25zb2xlLmxvZyhcIvCfk50gQXBwcm92aW5nIHJvdXRlciB0byBzcGVuZCBBVVNEIChUcmVhc3VyeSkuLi5cIik7XG5cbiAgICAgICAgb25Mb2coe1xuICAgICAgICAgICAgdGFzazogXCJBcHByb3ZpbmcgUGF5bWVudCBSb3V0ZXJcIixcbiAgICAgICAgICAgIGFnZW50TmFtZTogXCJSZXNlYXJjaCBUcmVhc3VyeVwiLFxuICAgICAgICAgICAgYW1vdW50OiBcIjAuMDBcIixcbiAgICAgICAgICAgIHN0YXR1czogXCJwZW5kaW5nXCJcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgYXBwcm92ZVR4ID0gYXdhaXQgcmVzZWFyY2hUcmVhc3VyeS5hcHByb3ZlVG9rZW4oXG4gICAgICAgICAgICBhdXNkQWRkcmVzcyxcbiAgICAgICAgICAgIFBST1RPQ09MX1JPVVRFUl9BRERSRVNTLFxuICAgICAgICAgICAgZXRoZXJzLk1heFVpbnQyNTZcbiAgICAgICAgKTtcblxuICAgICAgICBjb25zb2xlLmxvZyhcIlRyZWFzdXJ5IEFwcHJvdmFsIHR4OlwiLCBhcHByb3ZlVHguaGFzaCk7XG4gICAgICAgIGF3YWl0IGFwcHJvdmVUeC53YWl0KCk7XG4gICAgICAgIGNvbnNvbGUubG9nKFwi4pyFIFRyZWFzdXJ5IEFwcHJvdmFsIGNvbmZpcm1lZFwiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmxvZyhcIuKchSBUcmVhc3VyeSBBbGxvd2FuY2UgYWxyZWFkeSBzdWZmaWNpZW50XCIpO1xuICAgIH1cblxuICAgIC8vIDYuIEFnZW50IERlY2lzaW9uIEVuZ2luZVxuICAgIGNvbnN0IGRlY2lkZVBheW1lbnRzID0gKGlucHV0OiBzdHJpbmcpID0+IHtcbiAgICAgICAgY29uc3QgdCA9IGlucHV0LnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIGNvbnN0IHBsYW4gPSBbXTtcblxuICAgICAgICAvLyBEeW5hbWljIGhpcmluZyBiYXNlZCBvbiBrZXl3b3Jkc1xuICAgICAgICBpZiAodC5pbmNsdWRlcyhcImRhdGFcIikgfHwgdC5pbmNsdWRlcyhcInJlc2VhcmNoXCIpIHx8IHQuaW5jbHVkZXMoXCJzdXBwbHlcIikgfHwgdC5pbmNsdWRlcyhcImluZm9cIikpIHtcbiAgICAgICAgICAgIHBsYW4ucHVzaCh7XG4gICAgICAgICAgICAgICAgcmVjaXBpZW50OiBkYXRhQWdlbnRBZGRyLFxuICAgICAgICAgICAgICAgIGFtb3VudDogXCIwLjIwXCIsXG4gICAgICAgICAgICAgICAgdGFzazogXCJEYXRhIENvbGxlY3Rpb25cIixcbiAgICAgICAgICAgICAgICBhZ2VudE5hbWU6IFwiRGF0YSBBZ2VudFwiLFxuICAgICAgICAgICAgICAgIGRlY2lzaW9uOiB7XG4gICAgICAgICAgICAgICAgICAgIHJlYXNvbjogXCJUYXNrIHRyaWdnZXIgJ2RhdGEvcmVzZWFyY2gnIC0+IEluaXRpYXRpbmcgU3VwcGx5IENoYWluIFNjYW5cIixcbiAgICAgICAgICAgICAgICAgICAgY29zdDogXCIwLjIwXCJcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0LmluY2x1ZGVzKFwic2VvXCIpIHx8IHQuaW5jbHVkZXMoXCJncm93dGhcIikgfHwgdC5pbmNsdWRlcyhcInJhbmtcIikgfHwgdC5pbmNsdWRlcyhcInNlYXJjaFwiKSkge1xuICAgICAgICAgICAgcGxhbi5wdXNoKHtcbiAgICAgICAgICAgICAgICByZWNpcGllbnQ6IHNlb0FnZW50QWRkcixcbiAgICAgICAgICAgICAgICBhbW91bnQ6IFwiMC4xMFwiLFxuICAgICAgICAgICAgICAgIHRhc2s6IFwiU0VPIE9wdGltaXphdGlvblwiLFxuICAgICAgICAgICAgICAgIGFnZW50TmFtZTogXCJTRU8gQWdlbnRcIixcbiAgICAgICAgICAgICAgICBkZWNpc2lvbjoge1xuICAgICAgICAgICAgICAgICAgICByZWFzb246IFwiVGFzayB0cmlnZ2VyICdzZW8vZ3Jvd3RoJyAtPiBPcHRpbWl6aW5nIFNlYXJjaCBSYW5raW5nXCIsXG4gICAgICAgICAgICAgICAgICAgIGNvc3Q6IFwiMC4xMFwiXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodC5pbmNsdWRlcyhcImZvcm1hdFwiKSB8fCB0LmluY2x1ZGVzKFwicGRmXCIpIHx8IHQuaW5jbHVkZXMoXCJyZXBvcnRcIikgfHwgdC5pbmNsdWRlcyhcImxheW91dFwiKSkge1xuICAgICAgICAgICAgcGxhbi5wdXNoKHtcbiAgICAgICAgICAgICAgICByZWNpcGllbnQ6IGZvcm1hdHRpbmdBZ2VudEFkZHIsXG4gICAgICAgICAgICAgICAgYW1vdW50OiBcIjAuMDVcIixcbiAgICAgICAgICAgICAgICB0YXNrOiBcIkZvcm1hdHRpbmdcIixcbiAgICAgICAgICAgICAgICBhZ2VudE5hbWU6IFwiRm9ybWF0dGluZyBBZ2VudFwiLFxuICAgICAgICAgICAgICAgIGRlY2lzaW9uOiB7XG4gICAgICAgICAgICAgICAgICAgIHJlYXNvbjogXCJUYXNrIHRyaWdnZXIgJ2Zvcm1hdC9yZXBvcnQnIC0+IFN0cnVjdHVyaW5nIEZpbmFsIE91dHB1dFwiLFxuICAgICAgICAgICAgICAgICAgICBjb3N0OiBcIjAuMDVcIlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRmFsbGJhY2s6IElmIGlucHV0IGlzIHZhZ3VlLCB0cmlnZ2VyIHN0YW5kYXJkIHByb3RvY29sXG4gICAgICAgIGlmIChwbGFuLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCLimqDvuI8gTm8gc3BlY2lmaWMga2V5d29yZHMgLSBEZWZhdWx0aW5nIHRvIEZ1bGwgU3VpdGVcIik7XG4gICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgcmVjaXBpZW50OiBkYXRhQWdlbnRBZGRyLFxuICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IFwiMC4yMFwiLFxuICAgICAgICAgICAgICAgICAgICB0YXNrOiBcIkRhdGEgQ29sbGVjdGlvblwiLFxuICAgICAgICAgICAgICAgICAgICBhZ2VudE5hbWU6IFwiRGF0YSBBZ2VudFwiLFxuICAgICAgICAgICAgICAgICAgICBkZWNpc2lvbjogeyByZWFzb246IFwiQW1iaWd1b3VzIHRhc2sgaW5wdXQgLT4gRGVmYXVsdCBQcm90b2NvbDogRGF0YVwiLCBjb3N0OiBcIjAuMjBcIiB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHJlY2lwaWVudDogc2VvQWdlbnRBZGRyLFxuICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IFwiMC4xMFwiLFxuICAgICAgICAgICAgICAgICAgICB0YXNrOiBcIlNFTyBPcHRpbWl6YXRpb25cIixcbiAgICAgICAgICAgICAgICAgICAgYWdlbnROYW1lOiBcIlNFTyBBZ2VudFwiLFxuICAgICAgICAgICAgICAgICAgICBkZWNpc2lvbjogeyByZWFzb246IFwiQW1iaWd1b3VzIHRhc2sgaW5wdXQgLT4gRGVmYXVsdCBQcm90b2NvbDogU0VPXCIsIGNvc3Q6IFwiMC4xMFwiIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgcmVjaXBpZW50OiBmb3JtYXR0aW5nQWdlbnRBZGRyLFxuICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IFwiMC4wNVwiLFxuICAgICAgICAgICAgICAgICAgICB0YXNrOiBcIkZvcm1hdHRpbmdcIixcbiAgICAgICAgICAgICAgICAgICAgYWdlbnROYW1lOiBcIkZvcm1hdHRpbmcgQWdlbnRcIixcbiAgICAgICAgICAgICAgICAgICAgZGVjaXNpb246IHsgcmVhc29uOiBcIkFtYmlndW91cyB0YXNrIGlucHV0IC0+IERlZmF1bHQgUHJvdG9jb2w6IEZvcm1hdHRpbmdcIiwgY29zdDogXCIwLjA1XCIgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF07XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcGxhbjtcbiAgICB9O1xuXG4gICAgY29uc3QgcGF5bWVudHMgPSBkZWNpZGVQYXltZW50cyh0YXNrRGVzY3JpcHRpb24pO1xuXG4gICAgY29uc3QgZ2VuZXJhdGVNb2NrT3V0cHV0ID0gKGFnZW50OiBzdHJpbmcsIGlucHV0OiBzdHJpbmcpID0+IHtcbiAgICAgICAgY29uc3QgaSA9IGlucHV0LnN1YnN0cmluZygwLCAyMCkgKyAoaW5wdXQubGVuZ3RoID4gMjAgPyBcIi4uLlwiIDogXCJcIik7XG4gICAgICAgIGlmIChhZ2VudC5pbmNsdWRlcyhcIkRhdGFcIikpIHJldHVybiBg4oCiIElkZW50aWZpZWQgMyB2ZXJpZmllZCBkYXRhIHNvdXJjZXMgZm9yICcke2l9J1xcbuKAoiBFeHRyYWN0ZWQgMSw0MjAgcmVjb3JkcyBmcm9tIE9yYWNsZSBub2Rlc1xcbuKAoiBTYW5pdGl6ZWQgaW5wdXQgcGFyYW1ldGVyc2A7XG4gICAgICAgIGlmIChhZ2VudC5pbmNsdWRlcyhcIlNFT1wiKSkgcmV0dXJuIGA+IEtleXdvcmQgQW5hbHlzaXNcXG7igKIgUHJpbWFyeSBUZXJtOiBcIiR7aW5wdXQuc3BsaXQoJyAnKVswXSB8fCAnTWFpbid9XCJcXG7igKIgU2VhcmNoIFZvbDogSGlnaFxcbuKAoiBDb21wZXRpdGlvbjogTW9kZXJhdGVcXG7inIUgT3B0aW1pemF0aW9uIEFwcGxpZWRgO1xuICAgICAgICBpZiAoYWdlbnQuaW5jbHVkZXMoXCJGb3JtYXR0aW5nXCIpKSByZXR1cm4gYPCfk4QgUkVQT1JUIEdFTkVSQVRFRFxcbi0tLVxcblRpdGxlOiBTZWFyY2ggQW5hbHlzaXMgZm9yICR7aX1cXG5Gb3JtYXQ6IFBERiAodjEuNClcXG5TaXplOiAyLjRNQlxcblN0YXR1czogUmVhZHkgZm9yIERvd25sb2FkYDtcbiAgICAgICAgcmV0dXJuIFwiUHJvY2VzcyBjb21wbGV0ZWQgc3VjY2Vzc2Z1bGx5LlwiO1xuICAgIH07XG5cbiAgICAvLyA3LiBFeGVjdXRlIHBheW1lbnRzIChMb29wKVxuICAgIGZvciAoY29uc3QgcGF5IG9mIHBheW1lbnRzKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGDinqHvuI8gUGF5aW5nICR7cGF5LmFnZW50TmFtZX1gKTtcblxuICAgICAgICBvbkxvZyh7XG4gICAgICAgICAgICB0YXNrOiBwYXkudGFzayxcbiAgICAgICAgICAgIGFnZW50TmFtZTogcGF5LmFnZW50TmFtZSxcbiAgICAgICAgICAgIGFtb3VudDogcGF5LmFtb3VudCxcbiAgICAgICAgICAgIGRlY2lzaW9uOiBwYXkuZGVjaXNpb24sXG4gICAgICAgICAgICBzdGF0dXM6IFwicGVuZGluZ1wiXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBjYWxsZGF0YSA9IHJvdXRlci5pbnRlcmZhY2UuZW5jb2RlRnVuY3Rpb25EYXRhKFxuICAgICAgICAgICAgICAgIFwicHJvY2Vzc1BheW1lbnRcIixcbiAgICAgICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgICAgIHBheS5yZWNpcGllbnQsXG4gICAgICAgICAgICAgICAgICAgIGV0aGVycy5wYXJzZUV0aGVyKHBheS5hbW91bnQpLFxuICAgICAgICAgICAgICAgICAgICBgUGF5bWVudCBmb3IgJHtwYXkudGFza31gXG4gICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgY29uc3QgdHggPSBhd2FpdCByZXNlYXJjaFRyZWFzdXJ5LmV4ZWN1dGUoXG4gICAgICAgICAgICAgICAgUFJPVE9DT0xfUk9VVEVSX0FERFJFU1MsXG4gICAgICAgICAgICAgICAgMCxcbiAgICAgICAgICAgICAgICBjYWxsZGF0YVxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJUeCBzZW50OlwiLCB0eC5oYXNoKTtcbiAgICAgICAgICAgIGF3YWl0IHR4LndhaXQoKTtcblxuICAgICAgICAgICAgY29uc29sZS5sb2coYOKchSAke3BheS50YXNrfSBjb21wbGV0ZWApO1xuXG4gICAgICAgICAgICBvbkxvZyh7XG4gICAgICAgICAgICAgICAgdGFzazogYCR7cGF5LnRhc2t9IC0gQ29uZmlybWVkYCxcbiAgICAgICAgICAgICAgICBhZ2VudE5hbWU6IHBheS5hZ2VudE5hbWUsXG4gICAgICAgICAgICAgICAgYW1vdW50OiBwYXkuYW1vdW50LFxuICAgICAgICAgICAgICAgIHR4SGFzaDogdHguaGFzaCxcbiAgICAgICAgICAgICAgICBzdGF0dXM6IFwic3VjY2Vzc1wiLFxuICAgICAgICAgICAgICAgIG91dHB1dDogZ2VuZXJhdGVNb2NrT3V0cHV0KHBheS5hZ2VudE5hbWUsIHRhc2tEZXNjcmlwdGlvbilcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZiAob25UcmVhc3VyaWVzVXBkYXRlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCLwn5SEIFJlZmV0Y2hpbmcgTGl2ZSBUcmVhc3VyaWVzLi4uXCIpO1xuICAgICAgICAgICAgICAgIGF3YWl0IG9uVHJlYXN1cmllc1VwZGF0ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnI6IGFueSkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIuKdjCBQYXltZW50IGZhaWxlZDpcIiwgZXJyKTtcblxuICAgICAgICAgICAgb25Mb2coe1xuICAgICAgICAgICAgICAgIHRhc2s6IGAke3BheS50YXNrfSAtIEZBSUxFRGAsXG4gICAgICAgICAgICAgICAgYWdlbnROYW1lOiBwYXkuYWdlbnROYW1lLFxuICAgICAgICAgICAgICAgIGFtb3VudDogcGF5LmFtb3VudCxcbiAgICAgICAgICAgICAgICBzdGF0dXM6IFwiZXJyb3JcIlxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihnZXRSZXZlcnRSZWFzb24oZXJyKSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZyhcIvCfjokgUmVzZWFyY2ggVGFzayBXb3JrZmxvdyBDb21wbGV0ZWRcIik7XG4gICAgcmV0dXJuIFwiU1VDQ0VTU1wiO1xufVxuIl0sIm5hbWVzIjpbImdlbmVyYXRlRGF0YU91dHB1dCIsImdlbmVyYXRlU2VvT3V0cHV0IiwiZ2VuZXJhdGVGaW5hbFJlcG9ydCIsImFnZW50T3V0cHV0cyIsImdlbmVyYXRlTW9ja091dHB1dCIsImFnZW50IiwiaW5wdXQiLCJjb250ZXh0IiwiaW5jbHVkZXMiLCJkIiwicyIsInBheSIsInBheW1lbnRzIiwiY29uc29sZSIsImxvZyIsImFnZW50TmFtZSIsIm91dHB1dCIsInRhc2tEZXNjcmlwdGlvbiIsIm9uTG9nIiwiQUdFTlRfVFJFQVNVUllfQUJJIiwiZ2V0UmV2ZXJ0UmVhc29uIiwiZXJyIiwiaW5mbyIsImVycm9yIiwibWVzc2FnZSIsInJ1blJlc2VhcmNoVGFzayIsIm9uVHJlYXN1cmllc1VwZGF0ZSIsInRhc2siLCJhbW91bnQiLCJzdGF0dXMiLCJkZWNpc2lvbiIsInJlYXNvbiIsImNvc3QiLCJzaWduZXIiLCJhZGRyZXNzIiwiY29ubmVjdFdhbGxldCIsInJlc2VhcmNoVHJlYXN1cnlBZGRyIiwiQUdFTlRfUkVHSVNUUlkiLCJyZXNlYXJjaF9hZ2VudCIsInRyZWFzdXJ5X2FkZHJlc3MiLCJkYXRhQWdlbnRBZGRyIiwiZGF0YV9hZ2VudCIsInNlb0FnZW50QWRkciIsInNlb19hZ2VudCIsImZvcm1hdHRpbmdBZ2VudEFkZHIiLCJmb3JtYXR0aW5nX2FnZW50IiwiRXJyb3IiLCJyb3V0ZXIiLCJldGhlcnMiLCJDb250cmFjdCIsIlBST1RPQ09MX1JPVVRFUl9BRERSRVNTIiwiUk9VVEVSX0FCSSIsInJlc2VhcmNoVHJlYXN1cnkiLCJ0cmVhc3VyeU93bmVyIiwib3duZXIiLCJ0b0xvd2VyQ2FzZSIsIndhcm4iLCJhdXNkQWRkcmVzcyIsInBheW1lbnRUb2tlbiIsImF1c2QiLCJFUkMyMF9BQkkiLCJmdW5kaW5nQW1vdW50IiwicGFyc2VFdGhlciIsInVzZXJBbGxvd2FuY2UiLCJhbGxvd2FuY2UiLCJhcHByb3ZlVHgiLCJhcHByb3ZlIiwiTWF4VWludDI1NiIsImhhc2giLCJ3YWl0IiwiZnVuZFR4IiwicHJvY2Vzc1BheW1lbnQiLCJ0eEhhc2giLCJjdXJyZW50QWxsb3dhbmNlIiwicmVxdWlyZWRBbW91bnQiLCJhcHByb3ZlVG9rZW4iLCJkZWNpZGVQYXltZW50cyIsInQiLCJwbGFuIiwicHVzaCIsInJlY2lwaWVudCIsImxlbmd0aCIsImkiLCJzdWJzdHJpbmciLCJzcGxpdCIsImNhbGxkYXRhIiwiaW50ZXJmYWNlIiwiZW5jb2RlRnVuY3Rpb25EYXRhIiwidHgiLCJleGVjdXRlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/lib/runResearchTask.ts\n"));

/***/ })

});