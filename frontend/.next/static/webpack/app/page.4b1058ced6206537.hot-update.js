"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/page",{

/***/ "(app-pages-browser)/./src/lib/runResearchTask.ts":
/*!************************************!*\
  !*** ./src/lib/runResearchTask.ts ***!
  \************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   runResearchTask: function() { return /* binding */ runResearchTask; }\n/* harmony export */ });\n/* harmony import */ var ethers__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ethers */ \"(app-pages-browser)/./node_modules/ethers/lib.esm/contract/contract.js\");\n/* harmony import */ var ethers__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ethers */ \"(app-pages-browser)/./node_modules/ethers/lib.esm/utils/units.js\");\n/* harmony import */ var ethers__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ethers */ \"(app-pages-browser)/./node_modules/ethers/lib.esm/constants/numbers.js\");\n/* harmony import */ var _registry__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./registry */ \"(app-pages-browser)/./src/lib/registry.ts\");\n/* harmony import */ var _contracts__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./contracts */ \"(app-pages-browser)/./src/lib/contracts.ts\");\n/* harmony import */ var _wallet__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./wallet */ \"(app-pages-browser)/./src/lib/wallet.ts\");\n/* harmony import */ var _researchOutputs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./researchOutputs */ \"(app-pages-browser)/./src/lib/researchOutputs.ts\");\n\n\n\n\n\nconst AGENT_TREASURY_ABI = [\n    \"function execute(address target, uint256 value, bytes calldata data) external returns (bytes)\",\n    \"function approveToken(address token, address spender, uint256 amount) external\",\n    \"function owner() view returns (address)\"\n];\n// Helper to extract revert reason\nconst getRevertReason = (err)=>{\n    var _err_info_error, _err_info;\n    if (err === null || err === void 0 ? void 0 : (_err_info = err.info) === null || _err_info === void 0 ? void 0 : (_err_info_error = _err_info.error) === null || _err_info_error === void 0 ? void 0 : _err_info_error.message) return err.info.error.message;\n    if (err === null || err === void 0 ? void 0 : err.message) return err.message;\n    return \"Transaction Failed (Unknown Reason)\";\n};\n/**\n * Executes the full research workflow by orchestrating the Research Agent.\n * Uses pure ethers.js v6 with window.ethereum.\n */ async function runResearchTask(taskDescription, onLog, onTreasuriesUpdate) {\n    console.log('\\uD83D\\uDE80 Starting Research Task: \"'.concat(taskDescription, '\"'));\n    // 0. Log User Task Submission (UI Only)\n    onLog({\n        task: \"User Task Submitted\",\n        agentName: \"User\",\n        amount: \"-\",\n        status: \"success\",\n        decision: {\n            reason: taskDescription,\n            cost: \"-\"\n        }\n    });\n    // 1. Connect Wallet\n    const { signer, address } = await (0,_wallet__WEBPACK_IMPORTED_MODULE_2__.connectWallet)();\n    console.log(\"\\uD83D\\uDC64 Connected wallet:\", address);\n    // 2. Load registry\n    const researchTreasuryAddr = _registry__WEBPACK_IMPORTED_MODULE_0__.AGENT_REGISTRY.research_agent.treasury_address;\n    const dataAgentAddr = _registry__WEBPACK_IMPORTED_MODULE_0__.AGENT_REGISTRY.data_agent.treasury_address;\n    const seoAgentAddr = _registry__WEBPACK_IMPORTED_MODULE_0__.AGENT_REGISTRY.seo_agent.treasury_address;\n    const formattingAgentAddr = _registry__WEBPACK_IMPORTED_MODULE_0__.AGENT_REGISTRY.formatting_agent.treasury_address;\n    // ✅ FIX 1 — Registry sanity check\n    if (!researchTreasuryAddr || !dataAgentAddr || !seoAgentAddr || !formattingAgentAddr) {\n        throw new Error(\"❌ Agent registry is missing treasury addresses\");\n    }\n    console.log(\"\\uD83D\\uDCD2 Registry OK\");\n    // 3. Instantiate contracts\n    const router = new ethers__WEBPACK_IMPORTED_MODULE_4__.Contract(_contracts__WEBPACK_IMPORTED_MODULE_1__.PROTOCOL_ROUTER_ADDRESS, _contracts__WEBPACK_IMPORTED_MODULE_1__.ROUTER_ABI, signer);\n    const researchTreasury = new ethers__WEBPACK_IMPORTED_MODULE_4__.Contract(researchTreasuryAddr, AGENT_TREASURY_ABI, signer);\n    // ✅ FIX 2 — Execution authority check\n    try {\n        const treasuryOwner = await researchTreasury.owner();\n        console.log(\"\\uD83C\\uDFE6 Research Treasury Owner:\", treasuryOwner);\n        console.log(\"✍️ Connected Wallet:\", address);\n        if (treasuryOwner.toLowerCase() !== address.toLowerCase()) {\n            console.warn(\"⚠️ Wallet is NOT treasury owner — execute() may revert\");\n        } else {\n            console.log(\"✅ Wallet IS treasury owner\");\n        }\n    } catch (e) {\n        console.log(\"ℹ️ Treasury has no owner() or uses role-based auth\");\n    }\n    // 4. Fetch payment token (AUSD)\n    console.log(\"\\uD83D\\uDCB0 Fetching payment token...\");\n    const ausdAddress = await router.paymentToken();\n    console.log(\"AUSD Address:\", ausdAddress);\n    const ausd = new ethers__WEBPACK_IMPORTED_MODULE_4__.Contract(ausdAddress, _contracts__WEBPACK_IMPORTED_MODULE_1__.ERC20_ABI, signer);\n    // ==========================================\n    // NEW STEP: User Funds Research Agent (1.00 AUSD)\n    // ==========================================\n    const fundingAmount = ethers__WEBPACK_IMPORTED_MODULE_5__.parseEther(\"1.0\");\n    console.log(\"Checking user allowance for funding...\");\n    const userAllowance = await ausd.allowance(address, _contracts__WEBPACK_IMPORTED_MODULE_1__.PROTOCOL_ROUTER_ADDRESS);\n    if (userAllowance < fundingAmount) {\n        console.log(\"\\uD83D\\uDCDD User approving Router...\");\n        onLog({\n            task: \"Approving AUSD Spend\",\n            agentName: \"User (You)\",\n            amount: \"0.00\",\n            status: \"pending\"\n        });\n        try {\n            const approveTx = await ausd.approve(_contracts__WEBPACK_IMPORTED_MODULE_1__.PROTOCOL_ROUTER_ADDRESS, ethers__WEBPACK_IMPORTED_MODULE_6__.MaxUint256);\n            console.log(\"User Approval Tx:\", approveTx.hash);\n            await approveTx.wait();\n            console.log(\"✅ User Approval Confirmed\");\n        } catch (err) {\n            console.error(\"User Approval Failed:\", err);\n            throw new Error(\"User Approval Failed: \".concat(getRevertReason(err)));\n        }\n    }\n    console.log(\"\\uD83D\\uDCB8 Funding Research Agent...\");\n    onLog({\n        task: \"Funding Research Agent\",\n        agentName: \"User (You)\",\n        amount: \"1.00\",\n        status: \"pending\"\n    });\n    try {\n        const fundTx = await router.processPayment(researchTreasuryAddr, fundingAmount, \"Initial Capital Infection\");\n        console.log(\"Funding Tx:\", fundTx.hash);\n        await fundTx.wait();\n        onLog({\n            task: \"Funding Complete\",\n            agentName: \"User (You)\",\n            amount: \"1.00\",\n            txHash: fundTx.hash,\n            status: \"success\"\n        });\n        console.log(\"✅ Funding Confirmed\");\n        if (onTreasuriesUpdate) {\n            console.log(\"\\uD83D\\uDD04 Refetching Live Treasuries...\");\n            await onTreasuriesUpdate();\n        }\n    } catch (err) {\n        console.error(\"Funding Failed:\", err);\n        onLog({\n            task: \"Funding Failed\",\n            agentName: \"User (You)\",\n            amount: \"1.00\",\n            status: \"error\"\n        });\n        throw new Error(\"Funding Failed: \".concat(getRevertReason(err)));\n    }\n    // ==========================================\n    // EXISTING FLOW: Research Agent Pays Downstream\n    // ==========================================\n    // 5. Allowance check (Research Treasury -> Router)\n    const currentAllowance = await ausd.allowance(researchTreasuryAddr, _contracts__WEBPACK_IMPORTED_MODULE_1__.PROTOCOL_ROUTER_ADDRESS);\n    const requiredAmount = ethers__WEBPACK_IMPORTED_MODULE_5__.parseEther(\"1.0\"); // Need enough for downstream payments\n    if (currentAllowance < requiredAmount) {\n        console.log(\"\\uD83D\\uDCDD Approving router to spend AUSD (Treasury)...\");\n        onLog({\n            task: \"Approving Payment Router\",\n            agentName: \"Research Treasury\",\n            amount: \"0.00\",\n            status: \"pending\"\n        });\n        const approveTx = await researchTreasury.approveToken(ausdAddress, _contracts__WEBPACK_IMPORTED_MODULE_1__.PROTOCOL_ROUTER_ADDRESS, ethers__WEBPACK_IMPORTED_MODULE_6__.MaxUint256);\n        console.log(\"Treasury Approval tx:\", approveTx.hash);\n        await approveTx.wait();\n        console.log(\"✅ Treasury Approval confirmed\");\n    } else {\n        console.log(\"✅ Treasury Allowance already sufficient\");\n    }\n    // 6. Agent Decision Engine\n    const decidePayments = (input)=>{\n        const t = input.toLowerCase();\n        const plan = [];\n        // Dynamic hiring based on keywords\n        if (t.includes(\"data\") || t.includes(\"research\") || t.includes(\"supply\") || t.includes(\"info\")) {\n            plan.push({\n                recipient: dataAgentAddr,\n                amount: \"0.20\",\n                task: \"Data Collection\",\n                agentName: \"Data Agent\",\n                decision: {\n                    reason: \"Task trigger 'data/research' -> Initiating Supply Chain Scan\",\n                    cost: \"0.20\",\n                    confidenceScore: 98,\n                    executionTime: \"~15s\"\n                }\n            });\n        }\n        if (t.includes(\"seo\") || t.includes(\"growth\") || t.includes(\"rank\") || t.includes(\"search\")) {\n            plan.push({\n                recipient: seoAgentAddr,\n                amount: \"0.10\",\n                task: \"SEO Optimization\",\n                agentName: \"SEO Agent\",\n                decision: {\n                    reason: \"Task trigger 'seo/growth' -> Optimizing Search Ranking\",\n                    cost: \"0.10\",\n                    confidenceScore: 89,\n                    executionTime: \"~8s\"\n                }\n            });\n        }\n        if (t.includes(\"format\") || t.includes(\"pdf\") || t.includes(\"report\") || t.includes(\"layout\")) {\n            plan.push({\n                recipient: formattingAgentAddr,\n                amount: \"0.05\",\n                task: \"Formatting\",\n                agentName: \"Formatting Agent\",\n                decision: {\n                    reason: \"Task trigger 'format/report' -> Structuring Final Output\",\n                    cost: \"0.05\",\n                    confidenceScore: 99,\n                    executionTime: \"~3s\"\n                }\n            });\n        }\n        // Fallback: If input is vague, trigger standard protocol\n        if (plan.length === 0) {\n            console.log(\"⚠️ No specific keywords - Defaulting to Full Suite\");\n            return [\n                {\n                    recipient: dataAgentAddr,\n                    amount: \"0.20\",\n                    task: \"Data Collection\",\n                    agentName: \"Data Agent\",\n                    decision: {\n                        reason: \"Ambiguous task input -> Default Protocol: Data\",\n                        cost: \"0.20\",\n                        confidenceScore: 75,\n                        executionTime: \"~15s\"\n                    }\n                },\n                {\n                    recipient: seoAgentAddr,\n                    amount: \"0.10\",\n                    task: \"SEO Optimization\",\n                    agentName: \"SEO Agent\",\n                    decision: {\n                        reason: \"Ambiguous task input -> Default Protocol: SEO\",\n                        cost: \"0.10\",\n                        confidenceScore: 80,\n                        executionTime: \"~8s\"\n                    }\n                },\n                {\n                    recipient: formattingAgentAddr,\n                    amount: \"0.05\",\n                    task: \"Formatting\",\n                    agentName: \"Formatting Agent\",\n                    decision: {\n                        reason: \"Ambiguous task input -> Default Protocol: Formatting\",\n                        cost: \"0.05\",\n                        confidenceScore: 95,\n                        executionTime: \"~3s\"\n                    }\n                }\n            ];\n        }\n        return plan;\n    };\n    const payments = decidePayments(taskDescription);\n    // Store outputs to chain them for the final report\n    const agentOutputs = {};\n    const generateMockOutput = (agent, input, context)=>{\n        if (agent.includes(\"Data\")) return (0,_researchOutputs__WEBPACK_IMPORTED_MODULE_3__.generateDataOutput)(input);\n        if (agent.includes(\"SEO\")) return (0,_researchOutputs__WEBPACK_IMPORTED_MODULE_3__.generateSeoOutput)(input);\n        if (agent.includes(\"Formatting\")) {\n            const d = context[\"Data Agent\"] || \"No data gathered.\";\n            const s = context[\"SEO Agent\"] || \"Title: Report for \".concat(input, \"\\nH2: Overview\");\n            return (0,_researchOutputs__WEBPACK_IMPORTED_MODULE_3__.generateFinalReport)(input, d, s);\n        }\n        return \"Task Completed.\";\n    };\n    // 7. Execute payments (Loop)\n    for (const pay of payments){\n        console.log(\"➡️ Paying \".concat(pay.agentName));\n        onLog({\n            task: pay.task,\n            agentName: pay.agentName,\n            amount: pay.amount,\n            decision: pay.decision,\n            status: \"pending\"\n        });\n        try {\n            const calldata = router.interface.encodeFunctionData(\"processPayment\", [\n                pay.recipient,\n                ethers__WEBPACK_IMPORTED_MODULE_5__.parseEther(pay.amount),\n                \"Payment for \".concat(pay.task)\n            ]);\n            const tx = await researchTreasury.execute(_contracts__WEBPACK_IMPORTED_MODULE_1__.PROTOCOL_ROUTER_ADDRESS, 0, calldata);\n            console.log(\"Tx sent:\", tx.hash);\n            await tx.wait();\n            console.log(\"✅ \".concat(pay.task, \" complete\"));\n            const output = generateMockOutput(pay.agentName, taskDescription, agentOutputs);\n            agentOutputs[pay.agentName] = output;\n            onLog({\n                task: \"\".concat(pay.task, \" - Confirmed\"),\n                agentName: pay.agentName,\n                amount: pay.amount,\n                txHash: tx.hash,\n                status: \"success\",\n                output: output\n            });\n            if (onTreasuriesUpdate) {\n                console.log(\"\\uD83D\\uDD04 Refetching Live Treasuries...\");\n                await onTreasuriesUpdate();\n            }\n        } catch (err) {\n            console.error(\"❌ Payment failed:\", err);\n            onLog({\n                task: \"\".concat(pay.task, \" - FAILED\"),\n                agentName: pay.agentName,\n                amount: pay.amount,\n                status: \"error\"\n            });\n            throw new Error(getRevertReason(err));\n        }\n    }\n    console.log(\"\\uD83C\\uDF89 Research Task Workflow Completed\");\n    return \"SUCCESS\";\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9saWIvcnVuUmVzZWFyY2hUYXNrLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQWdDO0FBQ1k7QUFDaUM7QUFDcEM7QUFDc0Q7QUFFL0YsTUFBTVMscUJBQXFCO0lBQ3ZCO0lBQ0E7SUFDQTtDQUNIO0FBRUQsa0NBQWtDO0FBQ2xDLE1BQU1DLGtCQUFrQixDQUFDQztRQUNqQkEsaUJBQUFBO0lBQUosSUFBSUEsZ0JBQUFBLDJCQUFBQSxZQUFBQSxJQUFLQyxJQUFJLGNBQVRELGlDQUFBQSxrQkFBQUEsVUFBV0UsS0FBSyxjQUFoQkYsc0NBQUFBLGdCQUFrQkcsT0FBTyxFQUFFLE9BQU9ILElBQUlDLElBQUksQ0FBQ0MsS0FBSyxDQUFDQyxPQUFPO0lBQzVELElBQUlILGdCQUFBQSwwQkFBQUEsSUFBS0csT0FBTyxFQUFFLE9BQU9ILElBQUlHLE9BQU87SUFDcEMsT0FBTztBQUNYO0FBRUE7OztDQUdDLEdBQ00sZUFBZUMsZ0JBQ2xCQyxlQUF1QixFQUN2QkMsS0FhVSxFQUNWQyxrQkFBd0M7SUFFeENDLFFBQVFDLEdBQUcsQ0FBQyx5Q0FBK0MsT0FBaEJKLGlCQUFnQjtJQUUzRCx3Q0FBd0M7SUFDeENDLE1BQU07UUFDRkksTUFBTTtRQUNOQyxXQUFXO1FBQ1hDLFFBQVE7UUFDUkMsUUFBUTtRQUNSQyxVQUFVO1lBQ05DLFFBQVFWO1lBQ1JXLE1BQU07UUFDVjtJQUNKO0lBRUEsb0JBQW9CO0lBQ3BCLE1BQU0sRUFBRUMsTUFBTSxFQUFFQyxPQUFPLEVBQUUsR0FBRyxNQUFNeEIsc0RBQWFBO0lBQy9DYyxRQUFRQyxHQUFHLENBQUMsa0NBQXdCUztJQUVwQyxtQkFBbUI7SUFDbkIsTUFBTUMsdUJBQXVCN0IscURBQWNBLENBQUM4QixjQUFjLENBQUNDLGdCQUFnQjtJQUMzRSxNQUFNQyxnQkFBZ0JoQyxxREFBY0EsQ0FBQ2lDLFVBQVUsQ0FBQ0YsZ0JBQWdCO0lBQ2hFLE1BQU1HLGVBQWVsQyxxREFBY0EsQ0FB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LENBQ3JDckYsK0RBQXVCQSxFQUN2QixHQUNBaUY7WUFHSmhFLFFBQVFDLEdBQUcsQ0FBQyxZQUFZa0UsR0FBRzdCLElBQUk7WUFDL0IsTUFBTTZCLEdBQUc1QixJQUFJO1lBRWJ2QyxRQUFRQyxHQUFHLENBQUMsS0FBYyxPQUFUOEQsSUFBSTdELElBQUksRUFBQztZQUUxQixNQUFNbUUsU0FBU1gsbUJBQW1CSyxJQUFJNUQsU0FBUyxFQUFFTixpQkFBaUI0RDtZQUNsRUEsWUFBWSxDQUFDTSxJQUFJNUQsU0FBUyxDQUFDLEdBQUdrRTtZQUU5QnZFLE1BQU07Z0JBQ0ZJLE1BQU0sR0FBWSxPQUFUNkQsSUFBSTdELElBQUksRUFBQztnQkFDbEJDLFdBQVc0RCxJQUFJNUQsU0FBUztnQkFDeEJDLFFBQVEyRCxJQUFJM0QsTUFBTTtnQkFDbEJzQyxRQUFReUIsR0FBRzdCLElBQUk7Z0JBQ2ZqQyxRQUFRO2dCQUNSZ0UsUUFBUUE7WUFDWjtZQUVBLElBQUl0RSxvQkFBb0I7Z0JBQ3BCQyxRQUFRQyxHQUFHLENBQUM7Z0JBQ1osTUFBTUY7WUFDVjtRQUNKLEVBQUUsT0FBT1AsS0FBVTtZQUNmUSxRQUFRTixLQUFLLENBQUMscUJBQXFCRjtZQUVuQ00sTUFBTTtnQkFDRkksTUFBTSxHQUFZLE9BQVQ2RCxJQUFJN0QsSUFBSSxFQUFDO2dCQUNsQkMsV0FBVzRELElBQUk1RCxTQUFTO2dCQUN4QkMsUUFBUTJELElBQUkzRCxNQUFNO2dCQUNsQkMsUUFBUTtZQUNaO1lBRUEsTUFBTSxJQUFJZSxNQUFNN0IsZ0JBQWdCQztRQUNwQztJQUNKO0lBRUFRLFFBQVFDLEdBQUcsQ0FBQztJQUNaLE9BQU87QUFDWCIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9zcmMvbGliL3J1blJlc2VhcmNoVGFzay50cz9kYzNkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGV0aGVycyB9IGZyb20gJ2V0aGVycyc7XG5pbXBvcnQgeyBBR0VOVF9SRUdJU1RSWSB9IGZyb20gJy4vcmVnaXN0cnknO1xuaW1wb3J0IHsgUFJPVE9DT0xfUk9VVEVSX0FERFJFU1MsIFJPVVRFUl9BQkksIEVSQzIwX0FCSSB9IGZyb20gJy4vY29udHJhY3RzJztcbmltcG9ydCB7IGNvbm5lY3RXYWxsZXQgfSBmcm9tICcuL3dhbGxldCc7XG5pbXBvcnQgeyBnZW5lcmF0ZURhdGFPdXRwdXQsIGdlbmVyYXRlU2VvT3V0cHV0LCBnZW5lcmF0ZUZpbmFsUmVwb3J0IH0gZnJvbSAnLi9yZXNlYXJjaE91dHB1dHMnO1xuXG5jb25zdCBBR0VOVF9UUkVBU1VSWV9BQkkgPSBbXG4gICAgXCJmdW5jdGlvbiBleGVjdXRlKGFkZHJlc3MgdGFyZ2V0LCB1aW50MjU2IHZhbHVlLCBieXRlcyBjYWxsZGF0YSBkYXRhKSBleHRlcm5hbCByZXR1cm5zIChieXRlcylcIixcbiAgICBcImZ1bmN0aW9uIGFwcHJvdmVUb2tlbihhZGRyZXNzIHRva2VuLCBhZGRyZXNzIHNwZW5kZXIsIHVpbnQyNTYgYW1vdW50KSBleHRlcm5hbFwiLFxuICAgIFwiZnVuY3Rpb24gb3duZXIoKSB2aWV3IHJldHVybnMgKGFkZHJlc3MpXCJcbl07XG5cbi8vIEhlbHBlciB0byBleHRyYWN0IHJldmVydCByZWFzb25cbmNvbnN0IGdldFJldmVydFJlYXNvbiA9IChlcnI6IGFueSkgPT4ge1xuICAgIGlmIChlcnI/LmluZm8/LmVycm9yPy5tZXNzYWdlKSByZXR1cm4gZXJyLmluZm8uZXJyb3IubWVzc2FnZTtcbiAgICBpZiAoZXJyPy5tZXNzYWdlKSByZXR1cm4gZXJyLm1lc3NhZ2U7XG4gICAgcmV0dXJuIFwiVHJhbnNhY3Rpb24gRmFpbGVkIChVbmtub3duIFJlYXNvbilcIjtcbn07XG5cbi8qKlxuICogRXhlY3V0ZXMgdGhlIGZ1bGwgcmVzZWFyY2ggd29ya2Zsb3cgYnkgb3JjaGVzdHJhdGluZyB0aGUgUmVzZWFyY2ggQWdlbnQuXG4gKiBVc2VzIHB1cmUgZXRoZXJzLmpzIHY2IHdpdGggd2luZG93LmV0aGVyZXVtLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcnVuUmVzZWFyY2hUYXNrKFxuICAgIHRhc2tEZXNjcmlwdGlvbjogc3RyaW5nLFxuICAgIG9uTG9nOiAobG9nOiB7XG4gICAgICAgIHRhc2s6IHN0cmluZztcbiAgICAgICAgYWdlbnROYW1lOiBzdHJpbmc7XG4gICAgICAgIGFtb3VudDogc3RyaW5nO1xuICAgICAgICB0eEhhc2g/OiBzdHJpbmc7XG4gICAgICAgIHN0YXR1czogXCJwZW5kaW5nXCIgfCBcInN1Y2Nlc3NcIiB8IFwiZXJyb3JcIjtcbiAgICAgICAgb3V0cHV0Pzogc3RyaW5nO1xuICAgICAgICBkZWNpc2lvbj86IHtcbiAgICAgICAgICAgIHJlYXNvbjogc3RyaW5nO1xuICAgICAgICAgICAgY29zdDogc3RyaW5nO1xuICAgICAgICAgICAgY29uZmlkZW5jZVNjb3JlPzogbnVtYmVyO1xuICAgICAgICAgICAgZXhlY3V0aW9uVGltZT86IHN0cmluZztcbiAgICAgICAgfTtcbiAgICB9KSA9PiB2b2lkLFxuICAgIG9uVHJlYXN1cmllc1VwZGF0ZT86ICgpID0+IFByb21pc2U8dm9pZD5cbikge1xuICAgIGNvbnNvbGUubG9nKGDwn5qAIFN0YXJ0aW5nIFJlc2VhcmNoIFRhc2s6IFwiJHt0YXNrRGVzY3JpcHRpb259XCJgKTtcblxuICAgIC8vIDAuIExvZyBVc2VyIFRhc2sgU3VibWlzc2lvbiAoVUkgT25seSlcbiAgICBvbkxvZyh7XG4gICAgICAgIHRhc2s6IFwiVXNlciBUYXNrIFN1Ym1pdHRlZFwiLFxuICAgICAgICBhZ2VudE5hbWU6IFwiVXNlclwiLFxuICAgICAgICBhbW91bnQ6IFwiLVwiLFxuICAgICAgICBzdGF0dXM6IFwic3VjY2Vzc1wiLFxuICAgICAgICBkZWNpc2lvbjoge1xuICAgICAgICAgICAgcmVhc29uOiB0YXNrRGVzY3JpcHRpb24sXG4gICAgICAgICAgICBjb3N0OiBcIi1cIlxuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyAxLiBDb25uZWN0IFdhbGxldFxuICAgIGNvbnN0IHsgc2lnbmVyLCBhZGRyZXNzIH0gPSBhd2FpdCBjb25uZWN0V2FsbGV0KCk7XG4gICAgY29uc29sZS5sb2coXCLwn5GkIENvbm5lY3RlZCB3YWxsZXQ6XCIsIGFkZHJlc3MpO1xuXG4gICAgLy8gMi4gTG9hZCByZWdpc3RyeVxuICAgIGNvbnN0IHJlc2VhcmNoVHJlYXN1cnlBZGRyID0gQUdFTlRfUkVHSVNUUlkucmVzZWFyY2hfYWdlbnQudHJlYXN1cnlfYWRkcmVzcztcbiAgICBjb25zdCBkYXRhQWdlbnRBZGRyID0gQUdFTlRfUkVHSVNUUlkuZGF0YV9hZ2VudC50cmVhc3VyeV9hZGRyZXNzO1xuICAgIGNvbnN0IHNlb0FnZW50QWRkciA9IEFHRU5UX1JFR0lTVFJZLnNlb19hZ2VudC50cmVhc3VyeV9hZGRyZXNzO1xuICAgIGNvbnN0IGZvcm1hdHRpbmdBZ2VudEFkZHIgPSBBR0VOVF9SRUdJU1RSWS5mb3JtYXR0aW5nX2FnZW50LnRyZWFzdXJ5X2FkZHJlc3M7XG5cbiAgICAvLyDinIUgRklYIDEg4oCUIFJlZ2lzdHJ5IHNhbml0eSBjaGVja1xuICAgIGlmIChcbiAgICAgICAgIXJlc2VhcmNoVHJlYXN1cnlBZGRyIHx8XG4gICAgICAgICFkYXRhQWdlbnRBZGRyIHx8XG4gICAgICAgICFzZW9BZ2VudEFkZHIgfHxcbiAgICAgICAgIWZvcm1hdHRpbmdBZ2VudEFkZHJcbiAgICApIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwi4p2MIEFnZW50IHJlZ2lzdHJ5IGlzIG1pc3NpbmcgdHJlYXN1cnkgYWRkcmVzc2VzXCIpO1xuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKFwi8J+TkiBSZWdpc3RyeSBPS1wiKTtcblxuICAgIC8vIDMuIEluc3RhbnRpYXRlIGNvbnRyYWN0c1xuICAgIGNvbnN0IHJvdXRlciA9IG5ldyBldGhlcnMuQ29udHJhY3QoXG4gICAgICAgIFBST1RPQ09MX1JPVVRFUl9BRERSRVNTLFxuICAgICAgICBST1VURVJfQUJJLFxuICAgICAgICBzaWduZXJcbiAgICApO1xuXG4gICAgY29uc3QgcmVzZWFyY2hUcmVhc3VyeSA9IG5ldyBldGhlcnMuQ29udHJhY3QoXG4gICAgICAgIHJlc2VhcmNoVHJlYXN1cnlBZGRyLFxuICAgICAgICBBR0VOVF9UUkVBU1VSWV9BQkksXG4gICAgICAgIHNpZ25lclxuICAgICk7XG5cbiAgICAvLyDinIUgRklYIDIg4oCUIEV4ZWN1dGlvbiBhdXRob3JpdHkgY2hlY2tcbiAgICB0cnkge1xuICAgICAgICBjb25zdCB0cmVhc3VyeU93bmVyID0gYXdhaXQgcmVzZWFyY2hUcmVhc3VyeS5vd25lcigpO1xuICAgICAgICBjb25zb2xlLmxvZyhcIvCfj6YgUmVzZWFyY2ggVHJlYXN1cnkgT3duZXI6XCIsIHRyZWFzdXJ5T3duZXIpO1xuICAgICAgICBjb25zb2xlLmxvZyhcIuKcje+4jyBDb25uZWN0ZWQgV2FsbGV0OlwiLCBhZGRyZXNzKTtcblxuICAgICAgICBpZiAodHJlYXN1cnlPd25lci50b0xvd2VyQ2FzZSgpICE9PSBhZGRyZXNzLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihcIuKaoO+4jyBXYWxsZXQgaXMgTk9UIHRyZWFzdXJ5IG93bmVyIOKAlCBleGVjdXRlKCkgbWF5IHJldmVydFwiKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwi4pyFIFdhbGxldCBJUyB0cmVhc3VyeSBvd25lclwiKTtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2gge1xuICAgICAgICBjb25zb2xlLmxvZyhcIuKEue+4jyBUcmVhc3VyeSBoYXMgbm8gb3duZXIoKSBvciB1c2VzIHJvbGUtYmFzZWQgYXV0aFwiKTtcbiAgICB9XG5cbiAgICAvLyA0LiBGZXRjaCBwYXltZW50IHRva2VuIChBVVNEKVxuICAgIGNvbnNvbGUubG9nKFwi8J+SsCBGZXRjaGluZyBwYXltZW50IHRva2VuLi4uXCIpO1xuICAgIGNvbnN0IGF1c2RBZGRyZXNzID0gYXdhaXQgcm91dGVyLnBheW1lbnRUb2tlbigpO1xuICAgIGNvbnNvbGUubG9nKFwiQVVTRCBBZGRyZXNzOlwiLCBhdXNkQWRkcmVzcyk7XG5cbiAgICBjb25zdCBhdXNkID0gbmV3IGV0aGVycy5Db250cmFjdChhdXNkQWRkcmVzcywgRVJDMjBfQUJJLCBzaWduZXIpO1xuXG4gICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgLy8gTkVXIFNURVA6IFVzZXIgRnVuZHMgUmVzZWFyY2ggQWdlbnQgKDEuMDAgQVVTRClcbiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICBjb25zdCBmdW5kaW5nQW1vdW50ID0gZXRoZXJzLnBhcnNlRXRoZXIoXCIxLjBcIik7XG5cbiAgICBjb25zb2xlLmxvZyhcIkNoZWNraW5nIHVzZXIgYWxsb3dhbmNlIGZvciBmdW5kaW5nLi4uXCIpO1xuICAgIGNvbnN0IHVzZXJBbGxvd2FuY2UgPSBhd2FpdCBhdXNkLmFsbG93YW5jZShhZGRyZXNzLCBQUk9UT0NPTF9ST1VURVJfQUREUkVTUyk7XG5cbiAgICBpZiAodXNlckFsbG93YW5jZSA8IGZ1bmRpbmdBbW91bnQpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCLwn5OdIFVzZXIgYXBwcm92aW5nIFJvdXRlci4uLlwiKTtcbiAgICAgICAgb25Mb2coe1xuICAgICAgICAgICAgdGFzazogXCJBcHByb3ZpbmcgQVVTRCBTcGVuZFwiLFxuICAgICAgICAgICAgYWdlbnROYW1lOiBcIlVzZXIgKFlvdSlcIixcbiAgICAgICAgICAgIGFtb3VudDogXCIwLjAwXCIsXG4gICAgICAgICAgICBzdGF0dXM6IFwicGVuZGluZ1wiXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBhcHByb3ZlVHggPSBhd2FpdCBhdXNkLmFwcHJvdmUoUFJPVE9DT0xfUk9VVEVSX0FERFJFU1MsIGV0aGVycy5NYXhVaW50MjU2KTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiVXNlciBBcHByb3ZhbCBUeDpcIiwgYXBwcm92ZVR4Lmhhc2gpO1xuICAgICAgICAgICAgYXdhaXQgYXBwcm92ZVR4LndhaXQoKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwi4pyFIFVzZXIgQXBwcm92YWwgQ29uZmlybWVkXCIpO1xuICAgICAgICB9IGNhdGNoIChlcnI6IGFueSkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIlVzZXIgQXBwcm92YWwgRmFpbGVkOlwiLCBlcnIpO1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVc2VyIEFwcHJvdmFsIEZhaWxlZDogJHtnZXRSZXZlcnRSZWFzb24oZXJyKX1gKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKFwi8J+SuCBGdW5kaW5nIFJlc2VhcmNoIEFnZW50Li4uXCIpO1xuICAgIG9uTG9nKHtcbiAgICAgICAgdGFzazogXCJGdW5kaW5nIFJlc2VhcmNoIEFnZW50XCIsXG4gICAgICAgIGFnZW50TmFtZTogXCJVc2VyIChZb3UpXCIsXG4gICAgICAgIGFtb3VudDogXCIxLjAwXCIsXG4gICAgICAgIHN0YXR1czogXCJwZW5kaW5nXCJcbiAgICB9KTtcblxuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGZ1bmRUeCA9IGF3YWl0IHJvdXRlci5wcm9jZXNzUGF5bWVudChcbiAgICAgICAgICAgIHJlc2VhcmNoVHJlYXN1cnlBZGRyLFxuICAgICAgICAgICAgZnVuZGluZ0Ftb3VudCxcbiAgICAgICAgICAgIFwiSW5pdGlhbCBDYXBpdGFsIEluZmVjdGlvblwiXG4gICAgICAgICk7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiRnVuZGluZyBUeDpcIiwgZnVuZFR4Lmhhc2gpO1xuICAgICAgICBhd2FpdCBmdW5kVHgud2FpdCgpO1xuXG4gICAgICAgIG9uTG9nKHtcbiAgICAgICAgICAgIHRhc2s6IFwiRnVuZGluZyBDb21wbGV0ZVwiLFxuICAgICAgICAgICAgYWdlbnROYW1lOiBcIlVzZXIgKFlvdSlcIixcbiAgICAgICAgICAgIGFtb3VudDogXCIxLjAwXCIsXG4gICAgICAgICAgICB0eEhhc2g6IGZ1bmRUeC5oYXNoLFxuICAgICAgICAgICAgc3RhdHVzOiBcInN1Y2Nlc3NcIlxuICAgICAgICB9KTtcbiAgICAgICAgY29uc29sZS5sb2coXCLinIUgRnVuZGluZyBDb25maXJtZWRcIik7XG5cbiAgICAgICAgaWYgKG9uVHJlYXN1cmllc1VwZGF0ZSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCLwn5SEIFJlZmV0Y2hpbmcgTGl2ZSBUcmVhc3VyaWVzLi4uXCIpO1xuICAgICAgICAgICAgYXdhaXQgb25UcmVhc3VyaWVzVXBkYXRlKCk7XG4gICAgICAgIH1cblxuICAgIH0gY2F0Y2ggKGVycjogYW55KSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJGdW5kaW5nIEZhaWxlZDpcIiwgZXJyKTtcbiAgICAgICAgb25Mb2coe1xuICAgICAgICAgICAgdGFzazogXCJGdW5kaW5nIEZhaWxlZFwiLFxuICAgICAgICAgICAgYWdlbnROYW1lOiBcIlVzZXIgKFlvdSlcIixcbiAgICAgICAgICAgIGFtb3VudDogXCIxLjAwXCIsXG4gICAgICAgICAgICBzdGF0dXM6IFwiZXJyb3JcIlxuICAgICAgICB9KTtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGdW5kaW5nIEZhaWxlZDogJHtnZXRSZXZlcnRSZWFzb24oZXJyKX1gKTtcbiAgICB9XG5cbiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICAvLyBFWElTVElORyBGTE9XOiBSZXNlYXJjaCBBZ2VudCBQYXlzIERvd25zdHJlYW1cbiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICAgIC8vIDUuIEFsbG93YW5jZSBjaGVjayAoUmVzZWFyY2ggVHJlYXN1cnkgLT4gUm91dGVyKVxuICAgIGNvbnN0IGN1cnJlbnRBbGxvd2FuY2UgPSBhd2FpdCBhdXNkLmFsbG93YW5jZShcbiAgICAgICAgcmVzZWFyY2hUcmVhc3VyeUFkZHIsXG4gICAgICAgIFBST1RPQ09MX1JPVVRFUl9BRERSRVNTXG4gICAgKTtcblxuICAgIGNvbnN0IHJlcXVpcmVkQW1vdW50ID0gZXRoZXJzLnBhcnNlRXRoZXIoXCIxLjBcIik7IC8vIE5lZWQgZW5vdWdoIGZvciBkb3duc3RyZWFtIHBheW1lbnRzXG5cbiAgICBpZiAoY3VycmVudEFsbG93YW5jZSA8IHJlcXVpcmVkQW1vdW50KSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwi8J+TnSBBcHByb3Zpbmcgcm91dGVyIHRvIHNwZW5kIEFVU0QgKFRyZWFzdXJ5KS4uLlwiKTtcblxuICAgICAgICBvbkxvZyh7XG4gICAgICAgICAgICB0YXNrOiBcIkFwcHJvdmluZyBQYXltZW50IFJvdXRlclwiLFxuICAgICAgICAgICAgYWdlbnROYW1lOiBcIlJlc2VhcmNoIFRyZWFzdXJ5XCIsXG4gICAgICAgICAgICBhbW91bnQ6IFwiMC4wMFwiLFxuICAgICAgICAgICAgc3RhdHVzOiBcInBlbmRpbmdcIlxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBhcHByb3ZlVHggPSBhd2FpdCByZXNlYXJjaFRyZWFzdXJ5LmFwcHJvdmVUb2tlbihcbiAgICAgICAgICAgIGF1c2RBZGRyZXNzLFxuICAgICAgICAgICAgUFJPVE9DT0xfUk9VVEVSX0FERFJFU1MsXG4gICAgICAgICAgICBldGhlcnMuTWF4VWludDI1NlxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnNvbGUubG9nKFwiVHJlYXN1cnkgQXBwcm92YWwgdHg6XCIsIGFwcHJvdmVUeC5oYXNoKTtcbiAgICAgICAgYXdhaXQgYXBwcm92ZVR4LndhaXQoKTtcbiAgICAgICAgY29uc29sZS5sb2coXCLinIUgVHJlYXN1cnkgQXBwcm92YWwgY29uZmlybWVkXCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwi4pyFIFRyZWFzdXJ5IEFsbG93YW5jZSBhbHJlYWR5IHN1ZmZpY2llbnRcIik7XG4gICAgfVxuXG4gICAgLy8gNi4gQWdlbnQgRGVjaXNpb24gRW5naW5lXG4gICAgY29uc3QgZGVjaWRlUGF5bWVudHMgPSAoaW5wdXQ6IHN0cmluZykgPT4ge1xuICAgICAgICBjb25zdCB0ID0gaW5wdXQudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgY29uc3QgcGxhbiA9IFtdO1xuXG4gICAgICAgIC8vIER5bmFtaWMgaGlyaW5nIGJhc2VkIG9uIGtleXdvcmRzXG4gICAgICAgIGlmICh0LmluY2x1ZGVzKFwiZGF0YVwiKSB8fCB0LmluY2x1ZGVzKFwicmVzZWFyY2hcIikgfHwgdC5pbmNsdWRlcyhcInN1cHBseVwiKSB8fCB0LmluY2x1ZGVzKFwiaW5mb1wiKSkge1xuICAgICAgICAgICAgcGxhbi5wdXNoKHtcbiAgICAgICAgICAgICAgICByZWNpcGllbnQ6IGRhdGFBZ2VudEFkZHIsXG4gICAgICAgICAgICAgICAgYW1vdW50OiBcIjAuMjBcIixcbiAgICAgICAgICAgICAgICB0YXNrOiBcIkRhdGEgQ29sbGVjdGlvblwiLFxuICAgICAgICAgICAgICAgIGFnZW50TmFtZTogXCJEYXRhIEFnZW50XCIsXG4gICAgICAgICAgICAgICAgZGVjaXNpb246IHtcbiAgICAgICAgICAgICAgICAgICAgcmVhc29uOiBcIlRhc2sgdHJpZ2dlciAnZGF0YS9yZXNlYXJjaCcgLT4gSW5pdGlhdGluZyBTdXBwbHkgQ2hhaW4gU2NhblwiLFxuICAgICAgICAgICAgICAgICAgICBjb3N0OiBcIjAuMjBcIixcbiAgICAgICAgICAgICAgICAgICAgY29uZmlkZW5jZVNjb3JlOiA5OCxcbiAgICAgICAgICAgICAgICAgICAgZXhlY3V0aW9uVGltZTogXCJ+MTVzXCJcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0LmluY2x1ZGVzKFwic2VvXCIpIHx8IHQuaW5jbHVkZXMoXCJncm93dGhcIikgfHwgdC5pbmNsdWRlcyhcInJhbmtcIikgfHwgdC5pbmNsdWRlcyhcInNlYXJjaFwiKSkge1xuICAgICAgICAgICAgcGxhbi5wdXNoKHtcbiAgICAgICAgICAgICAgICByZWNpcGllbnQ6IHNlb0FnZW50QWRkcixcbiAgICAgICAgICAgICAgICBhbW91bnQ6IFwiMC4xMFwiLFxuICAgICAgICAgICAgICAgIHRhc2s6IFwiU0VPIE9wdGltaXphdGlvblwiLFxuICAgICAgICAgICAgICAgIGFnZW50TmFtZTogXCJTRU8gQWdlbnRcIixcbiAgICAgICAgICAgICAgICBkZWNpc2lvbjoge1xuICAgICAgICAgICAgICAgICAgICByZWFzb246IFwiVGFzayB0cmlnZ2VyICdzZW8vZ3Jvd3RoJyAtPiBPcHRpbWl6aW5nIFNlYXJjaCBSYW5raW5nXCIsXG4gICAgICAgICAgICAgICAgICAgIGNvc3Q6IFwiMC4xMFwiLFxuICAgICAgICAgICAgICAgICAgICBjb25maWRlbmNlU2NvcmU6IDg5LFxuICAgICAgICAgICAgICAgICAgICBleGVjdXRpb25UaW1lOiBcIn44c1wiXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodC5pbmNsdWRlcyhcImZvcm1hdFwiKSB8fCB0LmluY2x1ZGVzKFwicGRmXCIpIHx8IHQuaW5jbHVkZXMoXCJyZXBvcnRcIikgfHwgdC5pbmNsdWRlcyhcImxheW91dFwiKSkge1xuICAgICAgICAgICAgcGxhbi5wdXNoKHtcbiAgICAgICAgICAgICAgICByZWNpcGllbnQ6IGZvcm1hdHRpbmdBZ2VudEFkZHIsXG4gICAgICAgICAgICAgICAgYW1vdW50OiBcIjAuMDVcIixcbiAgICAgICAgICAgICAgICB0YXNrOiBcIkZvcm1hdHRpbmdcIixcbiAgICAgICAgICAgICAgICBhZ2VudE5hbWU6IFwiRm9ybWF0dGluZyBBZ2VudFwiLFxuICAgICAgICAgICAgICAgIGRlY2lzaW9uOiB7XG4gICAgICAgICAgICAgICAgICAgIHJlYXNvbjogXCJUYXNrIHRyaWdnZXIgJ2Zvcm1hdC9yZXBvcnQnIC0+IFN0cnVjdHVyaW5nIEZpbmFsIE91dHB1dFwiLFxuICAgICAgICAgICAgICAgICAgICBjb3N0OiBcIjAuMDVcIixcbiAgICAgICAgICAgICAgICAgICAgY29uZmlkZW5jZVNjb3JlOiA5OSxcbiAgICAgICAgICAgICAgICAgICAgZXhlY3V0aW9uVGltZTogXCJ+M3NcIlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRmFsbGJhY2s6IElmIGlucHV0IGlzIHZhZ3VlLCB0cmlnZ2VyIHN0YW5kYXJkIHByb3RvY29sXG4gICAgICAgIGlmIChwbGFuLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCLimqDvuI8gTm8gc3BlY2lmaWMga2V5d29yZHMgLSBEZWZhdWx0aW5nIHRvIEZ1bGwgU3VpdGVcIik7XG4gICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgcmVjaXBpZW50OiBkYXRhQWdlbnRBZGRyLFxuICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IFwiMC4yMFwiLFxuICAgICAgICAgICAgICAgICAgICB0YXNrOiBcIkRhdGEgQ29sbGVjdGlvblwiLFxuICAgICAgICAgICAgICAgICAgICBhZ2VudE5hbWU6IFwiRGF0YSBBZ2VudFwiLFxuICAgICAgICAgICAgICAgICAgICBkZWNpc2lvbjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVhc29uOiBcIkFtYmlndW91cyB0YXNrIGlucHV0IC0+IERlZmF1bHQgUHJvdG9jb2w6IERhdGFcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvc3Q6IFwiMC4yMFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlkZW5jZVNjb3JlOiA3NSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4ZWN1dGlvblRpbWU6IFwifjE1c1wiXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgcmVjaXBpZW50OiBzZW9BZ2VudEFkZHIsXG4gICAgICAgICAgICAgICAgICAgIGFtb3VudDogXCIwLjEwXCIsXG4gICAgICAgICAgICAgICAgICAgIHRhc2s6IFwiU0VPIE9wdGltaXphdGlvblwiLFxuICAgICAgICAgICAgICAgICAgICBhZ2VudE5hbWU6IFwiU0VPIEFnZW50XCIsXG4gICAgICAgICAgICAgICAgICAgIGRlY2lzaW9uOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWFzb246IFwiQW1iaWd1b3VzIHRhc2sgaW5wdXQgLT4gRGVmYXVsdCBQcm90b2NvbDogU0VPXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb3N0OiBcIjAuMTBcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZGVuY2VTY29yZTogODAsXG4gICAgICAgICAgICAgICAgICAgICAgICBleGVjdXRpb25UaW1lOiBcIn44c1wiXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgcmVjaXBpZW50OiBmb3JtYXR0aW5nQWdlbnRBZGRyLFxuICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IFwiMC4wNVwiLFxuICAgICAgICAgICAgICAgICAgICB0YXNrOiBcIkZvcm1hdHRpbmdcIixcbiAgICAgICAgICAgICAgICAgICAgYWdlbnROYW1lOiBcIkZvcm1hdHRpbmcgQWdlbnRcIixcbiAgICAgICAgICAgICAgICAgICAgZGVjaXNpb246IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYXNvbjogXCJBbWJpZ3VvdXMgdGFzayBpbnB1dCAtPiBEZWZhdWx0IFByb3RvY29sOiBGb3JtYXR0aW5nXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb3N0OiBcIjAuMDVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZGVuY2VTY29yZTogOTUsXG4gICAgICAgICAgICAgICAgICAgICAgICBleGVjdXRpb25UaW1lOiBcIn4zc1wiXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBdO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHBsYW47XG4gICAgfTtcblxuICAgIGNvbnN0IHBheW1lbnRzID0gZGVjaWRlUGF5bWVudHModGFza0Rlc2NyaXB0aW9uKTtcblxuICAgIC8vIFN0b3JlIG91dHB1dHMgdG8gY2hhaW4gdGhlbSBmb3IgdGhlIGZpbmFsIHJlcG9ydFxuICAgIGNvbnN0IGFnZW50T3V0cHV0czogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHt9O1xuXG4gICAgY29uc3QgZ2VuZXJhdGVNb2NrT3V0cHV0ID0gKGFnZW50OiBzdHJpbmcsIGlucHV0OiBzdHJpbmcsIGNvbnRleHQ6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4pID0+IHtcbiAgICAgICAgaWYgKGFnZW50LmluY2x1ZGVzKFwiRGF0YVwiKSkgcmV0dXJuIGdlbmVyYXRlRGF0YU91dHB1dChpbnB1dCk7XG4gICAgICAgIGlmIChhZ2VudC5pbmNsdWRlcyhcIlNFT1wiKSkgcmV0dXJuIGdlbmVyYXRlU2VvT3V0cHV0KGlucHV0KTtcbiAgICAgICAgaWYgKGFnZW50LmluY2x1ZGVzKFwiRm9ybWF0dGluZ1wiKSkge1xuICAgICAgICAgICAgY29uc3QgZCA9IGNvbnRleHRbXCJEYXRhIEFnZW50XCJdIHx8IFwiTm8gZGF0YSBnYXRoZXJlZC5cIjtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBjb250ZXh0W1wiU0VPIEFnZW50XCJdIHx8IGBUaXRsZTogUmVwb3J0IGZvciAke2lucHV0fVxcbkgyOiBPdmVydmlld2A7XG4gICAgICAgICAgICByZXR1cm4gZ2VuZXJhdGVGaW5hbFJlcG9ydChpbnB1dCwgZCwgcyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFwiVGFzayBDb21wbGV0ZWQuXCI7XG4gICAgfTtcblxuICAgIC8vIDcuIEV4ZWN1dGUgcGF5bWVudHMgKExvb3ApXG4gICAgZm9yIChjb25zdCBwYXkgb2YgcGF5bWVudHMpIHtcbiAgICAgICAgY29uc29sZS5sb2coYOKeoe+4jyBQYXlpbmcgJHtwYXkuYWdlbnROYW1lfWApO1xuXG4gICAgICAgIG9uTG9nKHtcbiAgICAgICAgICAgIHRhc2s6IHBheS50YXNrLFxuICAgICAgICAgICAgYWdlbnROYW1lOiBwYXkuYWdlbnROYW1lLFxuICAgICAgICAgICAgYW1vdW50OiBwYXkuYW1vdW50LFxuICAgICAgICAgICAgZGVjaXNpb246IHBheS5kZWNpc2lvbixcbiAgICAgICAgICAgIHN0YXR1czogXCJwZW5kaW5nXCJcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGNhbGxkYXRhID0gcm91dGVyLmludGVyZmFjZS5lbmNvZGVGdW5jdGlvbkRhdGEoXG4gICAgICAgICAgICAgICAgXCJwcm9jZXNzUGF5bWVudFwiLFxuICAgICAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAgICAgcGF5LnJlY2lwaWVudCxcbiAgICAgICAgICAgICAgICAgICAgZXRoZXJzLnBhcnNlRXRoZXIocGF5LmFtb3VudCksXG4gICAgICAgICAgICAgICAgICAgIGBQYXltZW50IGZvciAke3BheS50YXNrfWBcbiAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBjb25zdCB0eCA9IGF3YWl0IHJlc2VhcmNoVHJlYXN1cnkuZXhlY3V0ZShcbiAgICAgICAgICAgICAgICBQUk9UT0NPTF9ST1VURVJfQUREUkVTUyxcbiAgICAgICAgICAgICAgICAwLFxuICAgICAgICAgICAgICAgIGNhbGxkYXRhXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIlR4IHNlbnQ6XCIsIHR4Lmhhc2gpO1xuICAgICAgICAgICAgYXdhaXQgdHgud2FpdCgpO1xuXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhg4pyFICR7cGF5LnRhc2t9IGNvbXBsZXRlYCk7XG5cbiAgICAgICAgICAgIGNvbnN0IG91dHB1dCA9IGdlbmVyYXRlTW9ja091dHB1dChwYXkuYWdlbnROYW1lLCB0YXNrRGVzY3JpcHRpb24sIGFnZW50T3V0cHV0cyk7XG4gICAgICAgICAgICBhZ2VudE91dHB1dHNbcGF5LmFnZW50TmFtZV0gPSBvdXRwdXQ7XG5cbiAgICAgICAgICAgIG9uTG9nKHtcbiAgICAgICAgICAgICAgICB0YXNrOiBgJHtwYXkudGFza30gLSBDb25maXJtZWRgLFxuICAgICAgICAgICAgICAgIGFnZW50TmFtZTogcGF5LmFnZW50TmFtZSxcbiAgICAgICAgICAgICAgICBhbW91bnQ6IHBheS5hbW91bnQsXG4gICAgICAgICAgICAgICAgdHhIYXNoOiB0eC5oYXNoLFxuICAgICAgICAgICAgICAgIHN0YXR1czogXCJzdWNjZXNzXCIsXG4gICAgICAgICAgICAgICAgb3V0cHV0OiBvdXRwdXRcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZiAob25UcmVhc3VyaWVzVXBkYXRlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCLwn5SEIFJlZmV0Y2hpbmcgTGl2ZSBUcmVhc3VyaWVzLi4uXCIpO1xuICAgICAgICAgICAgICAgIGF3YWl0IG9uVHJlYXN1cmllc1VwZGF0ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnI6IGFueSkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIuKdjCBQYXltZW50IGZhaWxlZDpcIiwgZXJyKTtcblxuICAgICAgICAgICAgb25Mb2coe1xuICAgICAgICAgICAgICAgIHRhc2s6IGAke3BheS50YXNrfSAtIEZBSUxFRGAsXG4gICAgICAgICAgICAgICAgYWdlbnROYW1lOiBwYXkuYWdlbnROYW1lLFxuICAgICAgICAgICAgICAgIGFtb3VudDogcGF5LmFtb3VudCxcbiAgICAgICAgICAgICAgICBzdGF0dXM6IFwiZXJyb3JcIlxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihnZXRSZXZlcnRSZWFzb24oZXJyKSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZyhcIvCfjokgUmVzZWFyY2ggVGFzayBXb3JrZmxvdyBDb21wbGV0ZWRcIik7XG4gICAgcmV0dXJuIFwiU1VDQ0VTU1wiO1xufVxuIl0sIm5hbWVzIjpbImV0aGVycyIsIkFHRU5UX1JFR0lTVFJZIiwiUFJPVE9DT0xfUk9VVEVSX0FERFJFU1MiLCJST1VURVJfQUJJIiwiRVJDMjBfQUJJIiwiY29ubmVjdFdhbGxldCIsImdlbmVyYXRlRGF0YU91dHB1dCIsImdlbmVyYXRlU2VvT3V0cHV0IiwiZ2VuZXJhdGVGaW5hbFJlcG9ydCIsIkFHRU5UX1RSRUFTVVJZX0FCSSIsImdldFJldmVydFJlYXNvbiIsImVyciIsImluZm8iLCJlcnJvciIsIm1lc3NhZ2UiLCJydW5SZXNlYXJjaFRhc2siLCJ0YXNrRGVzY3JpcHRpb24iLCJvbkxvZyIsIm9uVHJlYXN1cmllc1VwZGF0ZSIsImNvbnNvbGUiLCJsb2ciLCJ0YXNrIiwiYWdlbnROYW1lIiwiYW1vdW50Iiwic3RhdHVzIiwiZGVjaXNpb24iLCJyZWFzb24iLCJjb3N0Iiwic2lnbmVyIiwiYWRkcmVzcyIsInJlc2VhcmNoVHJlYXN1cnlBZGRyIiwicmVzZWFyY2hfYWdlbnQiLCJ0cmVhc3VyeV9hZGRyZXNzIiwiZGF0YUFnZW50QWRkciIsImRhdGFfYWdlbnQiLCJzZW9BZ2VudEFkZHIiLCJzZW9fYWdlbnQiLCJmb3JtYXR0aW5nQWdlbnRBZGRyIiwiZm9ybWF0dGluZ19hZ2VudCIsIkVycm9yIiwicm91dGVyIiwiQ29udHJhY3QiLCJyZXNlYXJjaFRyZWFzdXJ5IiwidHJlYXN1cnlPd25lciIsIm93bmVyIiwidG9Mb3dlckNhc2UiLCJ3YXJuIiwiYXVzZEFkZHJlc3MiLCJwYXltZW50VG9rZW4iLCJhdXNkIiwiZnVuZGluZ0Ftb3VudCIsInBhcnNlRXRoZXIiLCJ1c2VyQWxsb3dhbmNlIiwiYWxsb3dhbmNlIiwiYXBwcm92ZVR4IiwiYXBwcm92ZSIsIk1heFVpbnQyNTYiLCJoYXNoIiwid2FpdCIsImZ1bmRUeCIsInByb2Nlc3NQYXltZW50IiwidHhIYXNoIiwiY3VycmVudEFsbG93YW5jZSIsInJlcXVpcmVkQW1vdW50IiwiYXBwcm92ZVRva2VuIiwiZGVjaWRlUGF5bWVudHMiLCJpbnB1dCIsInQiLCJwbGFuIiwiaW5jbHVkZXMiLCJwdXNoIiwicmVjaXBpZW50IiwiY29uZmlkZW5jZVNjb3JlIiwiZXhlY3V0aW9uVGltZSIsImxlbmd0aCIsInBheW1lbnRzIiwiYWdlbnRPdXRwdXRzIiwiZ2VuZXJhdGVNb2NrT3V0cHV0IiwiYWdlbnQiLCJjb250ZXh0IiwiZCIsInMiLCJwYXkiLCJjYWxsZGF0YSIsImludGVyZmFjZSIsImVuY29kZUZ1bmN0aW9uRGF0YSIsInR4IiwiZXhlY3V0ZSIsIm91dHB1dCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/lib/runResearchTask.ts\n"));

/***/ })

});